{
  "root": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter",
  "generatedAt": "2026-02-26T14:14:33.032Z",
  "report": [
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\Forum.jsx",
      "counts": {
        "setInterval": 15,
        "clearInterval": 17,
        "setTimeout": 57,
        "requestAnimationFrame": 33,
        "cancelAnimationFrame": 12,
        "getBoundingClientRect": 21,
        "querySelectorAll": 25,
        "addEventListener": 80,
        "removeEventListener": 77,
        "<video": 14,
        "<audio": 4,
        "<img": 9,
        "autoplay": 13,
        "loop": 18,
        "preload": 23,
        "loading=lazy": 14,
        "decoding=async": 1,
        "createObjectURL": 6,
        "revokeObjectURL": 12,
        "onScroll": 6,
        "touchmove": 2,
        "wheel": 2
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)",
        "⚠ много getBoundingClientRect (дорого, особенно в scroll/raf)",
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 1784,
          "text": "const id = setInterval(async function(){",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 14692,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 14837,
          "text": "const id=setInterval(upd,3000)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 15394,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 15867,
          "text": "// Вместо setInterval(querySelectorAll...) — MutationObserver на новые медиа-узлы",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 16518,
          "text": "const id = setInterval(()=>{ if (visibleRef.current) activeRef.current = true }, 20000);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 16816,
          "text": "const id = setInterval(runTick, TICK_MS);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 18176,
          "text": "const t = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 18187,
          "text": "const t = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 19345,
          "text": "const id = setInterval(() => setCooldownLeft(s => Math.max(0, s - 1)), 1000);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 19466,
          "text": "mediaProgRef.current.timer = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 19613,
          "text": "recTimerRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 19870,
          "text": "videoTimerRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 21003,
          "text": "// вместо setInterval(querySelectorAll...) (это заметно снижает нагрузку на iOS)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 26011,
          "text": "const id = setInterval(() => __setQuestTick(x => (x + 1) & 1023), 1000);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 1870,
          "text": "return function(){ clearInterval(id); };",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 14716,
          "text": "try { clearInterval(id); } catch {}",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 14838,
          "text": "return ()=>{ window.removeEventListener('auth:ok',upd); window.removeEventListener('auth:success',upd); clearInterval(id) }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 15389,
          "text": "if (id) clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 15920,
          "text": "ytMutePolls.forEach((id) => clearInterval(id));",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 16519,
          "text": "return ()=> clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 16821,
          "text": "clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 18180,
          "text": "return () => { try { clearInterval(t); } catch {} };",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 18194,
          "text": "return () => { try { clearInterval(t); } catch {} };",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19346,
          "text": "return () => clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19448,
          "text": "if (t) { try { clearInterval(t); } catch {} }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19612,
          "text": "clearInterval(recTimerRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19634,
          "text": "clearInterval(recTimerRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19809,
          "text": "clearInterval(videoTimerRef.current); videoTimerRef.current = null;",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19869,
          "text": "clearInterval(videoTimerRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 19894,
          "text": "videoMirrorRef.current = null;  clearInterval(videoTimerRef.current); videoTimerRef.current = null;",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 26012,
          "text": "return () => clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 258,
          "text": "const timer = setTimeout(() => finish(new Error('video_metadata_timeout')), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 301,
          "text": "const timer = setTimeout(() => finish(new Error('audio_metadata_timeout')), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 668,
          "text": "const timer = setTimeout(() => cancel(), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1074,
          "text": "const id = setTimeout(() => set(null), 6500);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1575,
          "text": "return setTimeout(fn, 120);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1694,
          "text": "const timeoutId  = setTimeout(() => controller.abort(), 8000);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1816,
          "text": "const timeoutId  = setTimeout(() => controller.abort(), 8000);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 8679,
          "text": "timerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 9573,
          "text": "const h = setTimeout(async () => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 10694,
          "text": "window.setTimeout(() => node.classList.remove('replyTargetFlash'), 1100);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 11963,
          "text": "await new Promise(r => setTimeout(r, 30));",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 11982,
          "text": "setTimeout(calcAspectFromTrack, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 12029,
          "text": "setTimeout(calcAspectFromTrack, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 12800,
          "text": "unloadTimer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 13474,
          "text": "const timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15127,
          "text": "return setTimeout(fn, 120);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15365,
          "text": "else setTimeout(check, 60);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15633,
          "text": "const id = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 16168,
          "text": "flushSoonTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 16884,
          "text": "sseSyncTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 17000,
          "text": "setTimeout(() => { try { alignInboxStartUnderTabsEvent(); } catch {} }, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 17265,
          "text": "setTimeout(scrollToThreadStart, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 17402,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(applyComp)); } catch { try { setTimeout(applyComp, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18111,
          "text": "dmDialogsPersistTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18131,
          "text": "dmThreadPersistTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18604,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18607,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18695,
          "text": "try { setTimeout(maybeRecenter, 280); } catch {}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18696,
          "text": "try { setTimeout(maybeRecenter, 900); } catch {}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18718,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18728,
          "text": "window.setTimeout(() => node.classList.remove('replyTargetFlash'), 1100);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18733,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18736,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18812,
          "text": "const sleep = (ms) => new Promise((r) => setTimeout(r, ms))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18840,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 19017,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 19679,
          "text": "setTimeout(resolve, 400);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20141,
          "text": "setTimeout(done, 1200); // fallback",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20196,
          "text": "setTimeout(() => resolve(false), 900);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20898,
          "text": "rec.t = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 21645,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(run)); } catch { try { setTimeout(run, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 21677,
          "text": "try { setTimeout(() => document.querySelector('[data-forum-video-start=\"1\"]')?.scrollIntoView({ behavior:'auto', block:'start' }), 0); } catch {}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 21761,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 21895,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(apply)); } catch { try { setTimeout(apply, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 22020,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 22028,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23210,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23607,
          "text": "await new Promise(r => setTimeout(r, 2000));",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23742,
          "text": "setTimeout(() => { try { window.__forumToggleCreateTopic?.() } catch {} }, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23784,
          "text": "setTimeout(()=>document.querySelector('[data-forum-topics-start=\"1\"]')?.scrollIntoView({block:'start'}),0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 24710,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 25108,
          "text": "await new Promise(r => setTimeout(r, 2000));",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 25243,
          "text": "setTimeout(() => { try { window.__forumToggleCreateTopic?.() } catch {} }, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 25284,
          "text": "setTimeout(()=>document.querySelector('[data-forum-topics-start=\"1\"]')?.scrollIntoView({block:'start'}),0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 26348,
          "text": "onClick={() => { setTimeout(() => onMarkDone?.(q.id, tid), 0); }}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 26356,
          "text": "onClick={() => { setTimeout(() => onMarkDone?.(q.id, tid), 0); }}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 26415,
          "text": "const id = setTimeout(() => { try { titleRef.current?.focus?.() } catch {} }, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "requestAnimationFrame",
          "line": 8884,
          "text": "rafRef.current = window.requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 9233,
          "text": "rafRef.current = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 10710,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 10711,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 11730,
          "text": "rafId = requestAnimationFrame(bindStream);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 12455,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 12459,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 13759,
          "text": "rafRef.current = requestAnimationFrame(tick);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 13761,
          "text": "rafRef.current = requestAnimationFrame(tick);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 14703,
          "text": "raf = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15774,
          "text": "rafId = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 16057,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 17263,
          "text": "requestAnimationFrame(() => requestAnimationFrame(scrollToThreadStart));",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 17354,
          "text": "raf = window.requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 17402,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(applyComp)); } catch { try { setTimeout(applyComp, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18604,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18607,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18694,
          "text": "try { requestAnimationFrame(maybeRecenter); } catch {}",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18707,
          "text": "rafId = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18733,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18736,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19333,
          "text": "requestAnimationFrame(() => requestAnimationFrame(apply));",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19710,
          "text": "rafId = requestAnimationFrame(loop);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 21645,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(run)); } catch { try { setTimeout(run, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 21818,
          "text": "try { requestAnimationFrame(() => alignInboxStartUnderTabs(attempt + 1)); } catch {}",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 21833,
          "text": "try { requestAnimationFrame(() => alignInboxStartUnderTabs(attempt + 1)); } catch {}",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 21895,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(apply)); } catch { try { setTimeout(apply, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 22456,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 22457,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 22475,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 22476,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 22715,
          "text": "vfRafRef.current = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 22903,
          "text": "rafGuardRef.current = window.requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 8904,
          "text": "cancelAnimationFrame(rafRef.current)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 9231,
          "text": "if (rafRef.current) cancelAnimationFrame(rafRef.current);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 11736,
          "text": "if (rafId) cancelAnimationFrame(rafId);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 13257,
          "text": "try { if (st.raf) cancelAnimationFrame(st.raf); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 13747,
          "text": "if (rafRef.current) cancelAnimationFrame(rafRef.current);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 14723,
          "text": "try { if (raf) cancelAnimationFrame(raf); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 15885,
          "text": "try { if (rafId) cancelAnimationFrame(rafId); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 17423,
          "text": "if (raf) { try { window.cancelAnimationFrame(raf) } catch {} raf = 0; }",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 18721,
          "text": "if (rafId) { try { cancelAnimationFrame(rafId); } catch {} }",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 19717,
          "text": "try { if (rafId) cancelAnimationFrame(rafId); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 19725,
          "text": "try { if (rafId) cancelAnimationFrame(rafId); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 22736,
          "text": "try { cancelAnimationFrame(vfRafRef.current); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "getBoundingClientRect",
          "line": 38,
          "text": "try { lastHRef.current = el.getBoundingClientRect().height || 0; } catch {}",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 45,
          "text": "try { h = node.getBoundingClientRect().height || 0; } catch { h = 0; }",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8151,
          "text": "const rect = el.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8252,
          "text": "const r = btn.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8353,
          "text": "const r = btn.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8415,
          "text": "const r = btn.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8842,
          "text": "const rect = anchorEl.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8843,
          "text": "const popRect = popEl.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 9325,
          "text": "const r = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 9615,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 13830,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 14904,
          "text": "const rect = anchorEl.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18556,
          "text": "const contRect = scrollEl.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18557,
          "text": "const r = node.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 21838,
          "text": "const tabsRect = tabs.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 21839,
          "text": "const firstRect = first.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 21871,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 21913,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 21914,
          "text": "const contRect = scrollEl.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 21924,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 22906,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "querySelectorAll",
          "line": 1621,
          "text": "const list = Array.from(document.querySelectorAll(selector));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 14512,
          "text": "const videos = Array.from(document.querySelectorAll(\"video\"));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 14513,
          "text": "const audios = Array.from(document.querySelectorAll(\"audio\"));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 14514,
          "text": "const iframes = Array.from(document.querySelectorAll(\"iframe[data-forum-media]\"));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 14515,
          "text": "const qcastAudios = Array.from(document.querySelectorAll('audio[data-qcast-audio=\"1\"]'));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15028,
          "text": "document.querySelectorAll('iframe[data-forum-media]').forEach((frame) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15058,
          "text": "document.querySelectorAll('video').forEach((v) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15064,
          "text": "document.querySelectorAll('audio').forEach((a) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15081,
          "text": "document.querySelectorAll('video').forEach((v) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15087,
          "text": "document.querySelectorAll('audio').forEach((a) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15173,
          "text": "document.querySelectorAll(selector).forEach(prepare);",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15198,
          "text": "document.querySelectorAll(selector).forEach((v) => io.observe(v));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15226,
          "text": "return Array.from(document.querySelectorAll(selector)).filter((el) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15264,
          "text": "try { document.querySelectorAll(selector).forEach((el) => io.observe(el)); } catch {}",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15308,
          "text": "document.querySelectorAll('[data-forum-media]').forEach((el) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15501,
          "text": "return Array.from(document.querySelectorAll('iframe[data-forum-media]')).filter((frame) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15510,
          "text": "const all = Array.from(document.querySelectorAll('iframe[data-forum-media]'));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15862,
          "text": "try { document.querySelectorAll(selector).forEach(observeOne); } catch {}",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15900,
          "text": "document.querySelectorAll(selector).forEach((el) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 17728,
          "text": "const nodes = document.querySelectorAll('.inboxReplyItem[data-reply-id]');",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 18231,
          "text": "const nodes = document.querySelectorAll('.dmMsgRow[data-dm-ts]');",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 18258,
          "text": "const nodes = document.querySelectorAll('.dmRow[data-dm-uid]');",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 20923,
          "text": "const cards = Array.from(document.querySelectorAll(CARD_SELECTOR));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 20933,
          "text": ".querySelectorAll('video[data-forum-video=\"post\"]')",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 20989,
          "text": "document.querySelectorAll(CARD_SELECTOR).forEach((el) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "addEventListener",
          "line": 262,
          "text": "video.addEventListener('loadedmetadata', onLoaded, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 263,
          "text": "video.addEventListener('error', onError, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 303,
          "text": "audio.addEventListener('loadedmetadata', onLoaded, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 304,
          "text": "audio.addEventListener('error', onError, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 663,
          "text": "window.addEventListener('auth:ok', ok, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 664,
          "text": "window.addEventListener('auth:success', ok, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 665,
          "text": "window.addEventListener('auth:cancel', cancel, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 666,
          "text": "window.addEventListener('auth:fail', cancel, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1650,
          "text": "document.addEventListener('play', onPlay, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1651,
          "text": "document.addEventListener('pause', onStop, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1652,
          "text": "document.addEventListener('ended', onStop, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1759,
          "text": "root.addEventListener(e, onAny, {passive:true});",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1761,
          "text": "document.addEventListener('visibilitychange', onVis);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1762,
          "text": "window.addEventListener('focus', onAny);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8437,
          "text": "document.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8438,
          "text": "document.addEventListener('pointerdown', onClick);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8898,
          "text": "window.addEventListener('scroll', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8899,
          "text": "window.addEventListener('resize', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8922,
          "text": "document.addEventListener('pointerdown', onDown, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8923,
          "text": "document.addEventListener('keydown', onKey, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 9348,
          "text": "window.addEventListener('resize', applySize, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 10001,
          "text": "window.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 10091,
          "text": "window.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 10149,
          "text": "window.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11848,
          "text": "v.addEventListener('play', onPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11849,
          "text": "v.addEventListener('pause', onPause);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11850,
          "text": "v.addEventListener('ended', onEnd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12439,
          "text": "window.addEventListener('wheel', prevent, { passive: false });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12440,
          "text": "window.addEventListener('touchmove', prevent, { passive: false });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12746,
          "text": "try { el.addEventListener('volumechange', onVol); } catch {}",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12747,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13243,
          "text": "audio.addEventListener('loadedmetadata', onMeta);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13244,
          "text": "audio.addEventListener('durationchange', onMeta);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13245,
          "text": "audio.addEventListener('timeupdate', onTime);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13246,
          "text": "audio.addEventListener('play', onPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13247,
          "text": "audio.addEventListener('pause', onPause);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13248,
          "text": "audio.addEventListener('volumechange', onVolume);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13297,
          "text": "document.addEventListener('pointerdown', onDoc, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13785,
          "text": "a.addEventListener('loadedmetadata', onLoaded);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13786,
          "text": "a.addEventListener('play', onPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13787,
          "text": "a.addEventListener('pause', onPause);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13788,
          "text": "a.addEventListener('ended', onEnded);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14685,
          "text": "window.addEventListener(\"error\", onErr);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14686,
          "text": "window.addEventListener(\"unhandledrejection\", onRej);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14687,
          "text": "document.addEventListener(\"visibilitychange\", onVis);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14688,
          "text": "window.addEventListener(\"pagehide\", onHide);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14689,
          "text": "window.addEventListener(\"beforeunload\", onBeforeUnload);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14712,
          "text": "window.addEventListener(\"scroll\", onScroll, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14835,
          "text": "window.addEventListener('auth:ok',upd)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14836,
          "text": "window.addEventListener('auth:success',upd)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14936,
          "text": "document.addEventListener('pointerdown', onDown, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14937,
          "text": "document.addEventListener('keydown', onKey, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14938,
          "text": "window.addEventListener('scroll', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14939,
          "text": "window.addEventListener('resize', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 15107,
          "text": "document.addEventListener('play', handlePlay, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 15108,
          "text": "window.addEventListener('site-media-play', onSiteMediaPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 15349,
          "text": "el.addEventListener('volumechange', h, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 15881,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16026,
          "text": "window.addEventListener('qcoin:open', open)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16034,
          "text": "window.addEventListener('vip:open', openVip)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16085,
          "text": "window.addEventListener('forum:edit', onEdit);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16498,
          "text": "['click','keydown'].forEach(e => el.addEventListener(e, mark, { passive:true }));",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16506,
          "text": "document.addEventListener('visibilitychange', upd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16507,
          "text": "window.addEventListener('focus', upd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16508,
          "text": "window.addEventListener('blur',  upd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16971,
          "text": "window.addEventListener('storage', onStorage)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 17015,
          "text": "window.addEventListener('storage', onStorage);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 17415,
          "text": "window.addEventListener('scroll', onScroll, opts);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 18301,
          "text": "window.addEventListener('forum:head-hide-once', onHeadHideOnce);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 18302,
          "text": "window.addEventListener('inbox:open-dm', onOpenDm);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 19363,
          "text": "document.addEventListener('pointerdown', onDown, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 19374,
          "text": "sendBtn.addEventListener('click', onClick);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 19678,
          "text": "video.addEventListener('loadedmetadata', onMeta);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 20140,
          "text": "video.addEventListener('loadedmetadata', done, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 20194,
          "text": "video.addEventListener('seeked', onSeeked, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 22725,
          "text": "window.addEventListener('scroll', onScroll, opts);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 22726,
          "text": "window.addEventListener('resize', onScroll, opts);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 22785,
          "text": "window.addEventListener('resize', onResize, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 22888,
          "text": "window.addEventListener('scroll', onScroll, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 26408,
          "text": "window.addEventListener('keydown', onKeyDown)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 236,
          "text": "try { video.removeEventListener('loadedmetadata', onLoaded); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 237,
          "text": "try { video.removeEventListener('error', onError); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 282,
          "text": "try { audio.removeEventListener('loadedmetadata', onLoaded); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 283,
          "text": "try { audio.removeEventListener('error', onError); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 656,
          "text": "window.removeEventListener('auth:ok', ok);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 657,
          "text": "window.removeEventListener('auth:success', ok);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 658,
          "text": "window.removeEventListener('auth:cancel', cancel);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 659,
          "text": "window.removeEventListener('auth:fail', cancel);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1655,
          "text": "document.removeEventListener('play', onPlay, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1656,
          "text": "document.removeEventListener('pause', onStop, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1657,
          "text": "document.removeEventListener('ended', onStop, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1766,
          "text": "root.removeEventListener(e, onAny);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1768,
          "text": "document.removeEventListener('visibilitychange', onVis);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1769,
          "text": "window.removeEventListener('focus', onAny);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8440,
          "text": "document.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8441,
          "text": "document.removeEventListener('pointerdown', onClick);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8901,
          "text": "window.removeEventListener('scroll', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8902,
          "text": "window.removeEventListener('resize', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8925,
          "text": "document.removeEventListener('pointerdown', onDown, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8926,
          "text": "document.removeEventListener('keydown', onKey, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 9351,
          "text": "window.removeEventListener('resize', applySize);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 10002,
          "text": "return () => window.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 10092,
          "text": "return () => window.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 10150,
          "text": "return () => window.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11852,
          "text": "v.removeEventListener('play', onPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11853,
          "text": "v.removeEventListener('pause', onPause);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11854,
          "text": "v.removeEventListener('ended', onEnd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12443,
          "text": "window.removeEventListener('wheel', prevent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12444,
          "text": "window.removeEventListener('touchmove', prevent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12750,
          "text": "try { el.removeEventListener('volumechange', onVol); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12751,
          "text": "window.removeEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13250,
          "text": "audio.removeEventListener('loadedmetadata', onMeta);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13251,
          "text": "audio.removeEventListener('durationchange', onMeta);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13252,
          "text": "audio.removeEventListener('timeupdate', onTime);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13253,
          "text": "audio.removeEventListener('play', onPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13254,
          "text": "audio.removeEventListener('pause', onPause);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13255,
          "text": "audio.removeEventListener('volumechange', onVolume);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13298,
          "text": "return () => document.removeEventListener('pointerdown', onDoc);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13791,
          "text": "a.removeEventListener('loadedmetadata', onLoaded);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13792,
          "text": "a.removeEventListener('play', onPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13793,
          "text": "a.removeEventListener('pause', onPause);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13794,
          "text": "a.removeEventListener('ended', onEnded);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14717,
          "text": "try { window.removeEventListener(\"error\", onErr); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14718,
          "text": "try { window.removeEventListener(\"unhandledrejection\", onRej); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14719,
          "text": "try { document.removeEventListener(\"visibilitychange\", onVis); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14720,
          "text": "try { window.removeEventListener(\"pagehide\", onHide); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14721,
          "text": "try { window.removeEventListener(\"beforeunload\", onBeforeUnload); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14722,
          "text": "try { window.removeEventListener(\"scroll\", onScroll); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14838,
          "text": "return ()=>{ window.removeEventListener('auth:ok',upd); window.removeEventListener('auth:success',upd); clearInterval(id) }",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14941,
          "text": "document.removeEventListener('pointerdown', onDown, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14942,
          "text": "document.removeEventListener('keydown', onKey, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14943,
          "text": "window.removeEventListener('scroll', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14944,
          "text": "window.removeEventListener('resize', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 15110,
          "text": "document.removeEventListener('play', handlePlay, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 15111,
          "text": "window.removeEventListener('site-media-play', onSiteMediaPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 15884,
          "text": "window.removeEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 15903,
          "text": "if (h) el.removeEventListener('volumechange', h);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16027,
          "text": "return ()=> window.removeEventListener('qcoin:open', open)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16035,
          "text": "return () => window.removeEventListener('vip:open', openVip)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16086,
          "text": "return () => window.removeEventListener('forum:edit', onEdit);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16499,
          "text": "return ()=> ['click','keydown'].forEach(e => el.removeEventListener(e, mark));",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16510,
          "text": "document.removeEventListener('visibilitychange', upd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16511,
          "text": "window.removeEventListener('focus', upd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16512,
          "text": "window.removeEventListener('blur',  upd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16972,
          "text": "return () => window.removeEventListener('storage', onStorage)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 17016,
          "text": "return () => window.removeEventListener('storage', onStorage);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 17422,
          "text": "window.removeEventListener('scroll', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 18304,
          "text": "window.removeEventListener('forum:head-hide-once', onHeadHideOnce);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 18305,
          "text": "window.removeEventListener('inbox:open-dm', onOpenDm);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 19364,
          "text": "return () => document.removeEventListener('pointerdown', onDown, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 19375,
          "text": "return () => sendBtn.removeEventListener('click', onClick);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 19675,
          "text": "video.removeEventListener('loadedmetadata', onMeta);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 22733,
          "text": "window.removeEventListener('scroll', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 22734,
          "text": "window.removeEventListener('resize', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 22786,
          "text": "return () => window.removeEventListener('resize', onResize);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 22889,
          "text": "return () => window.removeEventListener('scroll', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 26409,
          "text": "return () => window.removeEventListener('keydown', onKeyDown)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 398,
          "text": "// Иначе оно улетает в ветку video и рендерится нативным <video controls> (чёрный экран).",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 2801,
          "text": "/* 2) Обычные <img>/<video>/<canvas>/<svg> внутри — растянуть и покрыть */",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 8475,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 11321,
          "text": "{/* видео: отдельные карточки с <video>, но с безопасным lifecycle (очистка буфера вдали от viewport) */}",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 11746,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 12121,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 12499,
          "text": "//  - unload <video> src when далеко от viewport (чистим декодер/буфер)",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 12669,
          "text": "* VideoMedia — безопасный <video> для ленты/постов/DM:",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 12850,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 14307,
          "text": "// Native <video> controls: ONLY after user interaction (tap/click)",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 15022,
          "text": "// В любой момент времени играет только один <video>/<audio> controls.",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 25732,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 26177,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 26268,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<audio",
          "line": 13498,
          "text": "<audio ref={audioRef} src={src} preload=\"metadata\" playsInline crossOrigin=\"anonymous\" data-qcast-audio=\"1\" className=\"qcastAudio\" />",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 13970,
          "text": "<audio ref={audioRef} src={src} preload=\"metadata\" />",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 15022,
          "text": "// В любой момент времени играет только один <video>/<audio> controls.",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 15842,
          "text": "// Q-Cast: mute/unmute берём с вложенного <audio>",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<img",
          "line": 944,
          "text": "// строго детерминированный URL и только <img>",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 988,
          "text": "* — После mount, если icon — картинка, показываем <img> внутри того же <div>",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 2801,
          "text": "/* 2) Обычные <img>/<video>/<canvas>/<svg> внутри — растянуть и покрыть */",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 9146,
          "text": "// WHY: <img> + object-fit:cover обрезает картинку в квадрат сразу после выбора.",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 9802,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 9811,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 12106,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 23254,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 24754,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 8478,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11377,
          "text": "allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11456,
          "text": "allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11748,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 12684,
          "text": "autoPlay,",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 12721,
          "text": ": !!autoPlay; // если преф не задан — для autoplay безопаснее стартовать muted",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 12753,
          "text": "}, [autoPlay]);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 12857,
          "text": "autoPlay={autoPlay}",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 15149,
          "text": "// Prime the lazy source before entering the autoplay focus zone for TikTok-like instant start.",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 15285,
          "text": "// === Shorts-like autoplay: play when in focus, pause when out ===",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 19661,
          "text": "video.autoplay = true;",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 26177,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 26268,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 8480,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12685,
          "text": "loop,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12858,
          "text": "loop={loop}",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15431,
          "text": "// LOOP: когда ролик закончился — стартуем заново без reload iframe",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15639,
          "text": "// Best-effort loop для iframe (Vimeo/встроенные плееры/прочее):",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15640,
          "text": "// добавляем loop=1 ОДИН РАЗ (не на каждом фокусе), чтобы не было дергания.",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15644,
          "text": "if (!u.searchParams.has('loop')) u.searchParams.set('loop', '1');",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15665,
          "text": "// LOOP: автоплей всегда зацикленный",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15666,
          "text": "el.loop = true;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15681,
          "text": "// LOOP: qcast-аудио тоже зацикливаем",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15682,
          "text": "a.loop = true;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 15721,
          "text": "// сохраняем уже \"loop-версию\" в data-src, чтобы дальше не мутить url повторно",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16689,
          "text": "// === Incremental sync loop: 2m flush + snapshot ===",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 19705,
          "text": "const loop = () => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 19710,
          "text": "rafId = requestAnimationFrame(loop);",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 19712,
          "text": "loop();",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26177,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26268,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 259,
          "text": "video.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 302,
          "text": "audio.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 1600,
          "text": "warmed.preload = slow ? 'metadata' : 'auto';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 1630,
          "text": "warmed.preload = slow ? 'metadata' : 'auto';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 8482,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11332,
          "text": "preload=\"none\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12500,
          "text": "//  - restore src when viewport приближается (быстрый старт сохраняем через preload=metadata)",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12625,
          "text": "try { el.preload = 'none'; } catch {}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12635,
          "text": "try { el.preload = (el.dataset?.__prewarm === '1') ? 'auto' : 'metadata'; } catch {}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12679,
          "text": "preload = 'none',",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12704,
          "text": "try { el.preload = 'none'; } catch {}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12809,
          "text": "try { el.preload = 'metadata'; } catch {}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12855,
          "text": "preload={preload}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 13498,
          "text": "<audio ref={audioRef} src={src} preload=\"metadata\" playsInline crossOrigin=\"anonymous\" data-qcast-audio=\"1\" className=\"qcastAudio\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 13970,
          "text": "<audio ref={audioRef} src={src} preload=\"metadata\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 14321,
          "text": "v.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 15144,
          "text": "video.preload = 'auto';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 20133,
          "text": "video.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 20936,
          "text": "// Prefetch только постеров: НЕ трогаем video.load()/preload=metadata,",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 24306,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 25736,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 26177,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 26268,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "loading=lazy",
          "line": 10602,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 11312,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 11375,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 11454,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 20943,
          "text": "img.loading = 'lazy';",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 23249,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 23257,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 24272,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 24290,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 24749,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 24757,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 25710,
          "text": "<Image src={u} alt=\"\" loading=\"lazy\" unoptimized width={600} height={600}",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 26178,
          "text": ": <Image className=\"questThumb\" src={q.cover} alt=\"\" loading=\"lazy\" unoptimized width={60} height={60} />",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 26269,
          "text": ": <Image className=\"questThumb\" src={q.cover} alt=\"\" loading=\"lazy\" unoptimized width={60} height={60} />",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "decoding=async",
          "line": 20942,
          "text": "img.decoding = 'async';",
          "why": "Полезно для img"
        },
        {
          "key": "createObjectURL",
          "line": 230,
          "text": "const src = isStringSrc ? String(videoSource) : URL.createObjectURL(videoSource);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 276,
          "text": "const src = isStringSrc ? String(audioSource) : URL.createObjectURL(audioSource);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 9397,
          "text": "const url = URL.createObjectURL(f);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 19601,
          "text": "const url  = URL.createObjectURL(blob);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 19845,
          "text": "const url = URL.createObjectURL(blob);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 20128,
          "text": ": URL.createObjectURL(videoSource);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "revokeObjectURL",
          "line": 242,
          "text": "try { URL.revokeObjectURL(src); } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 288,
          "text": "try { URL.revokeObjectURL(src); } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 9259,
          "text": "URL.revokeObjectURL(url);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 19850,
          "text": "if (prev && /^blob:/.test(prev)) URL.revokeObjectURL(prev);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 19917,
          "text": "try { URL.revokeObjectURL(pendingVideo) } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 19950,
          "text": "if (pendingAudio && /^blob:/.test(pendingAudio)) URL.revokeObjectURL(pendingAudio);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 20232,
          "text": "try { URL.revokeObjectURL(url); } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 20650,
          "text": "try { if (pendingAudio && /^blob:/.test(pendingAudio)) URL.revokeObjectURL(pendingAudio) } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 20665,
          "text": "if (pendingVideo && /^blob:/.test(pendingVideo)) URL.revokeObjectURL(pendingVideo);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 20787,
          "text": "try { if (pendingAudio && /^blob:/.test(pendingAudio)) URL.revokeObjectURL(pendingAudio) } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 20804,
          "text": "if (pendingVideo && /^blob:/.test(pendingVideo)) URL.revokeObjectURL(pendingVideo);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 25798,
          "text": "URL.revokeObjectURL(pendingVideo);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "onScroll",
          "line": 8897,
          "text": "const onScroll = () => schedulePositionUpdate()",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 14700,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 14935,
          "text": "const onScroll = () => syncReportAnchorRect()",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 17351,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 22713,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 22887,
          "text": "const onScroll = () => { lastUserScrollTsRef.current = Date.now(); };",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "touchmove",
          "line": 12440,
          "text": "window.addEventListener('touchmove', prevent, { passive: false });",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "touchmove",
          "line": 12444,
          "text": "window.removeEventListener('touchmove', prevent);",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 12439,
          "text": "window.addEventListener('wheel', prevent, { passive: false });",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 12443,
          "text": "window.removeEventListener('wheel', prevent);",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\tools\\audit-heavy.js",
      "counts": {
        "clearInterval": 1,
        "getBoundingClientRect": 1,
        "removeEventListener": 1,
        "<video": 6,
        "<audio": 1,
        "<img": 2,
        "autoplay": 6,
        "loop": 2,
        "preload": 1,
        "touchmove": 1,
        "wheel": 1
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "clearInterval",
          "line": 92,
          "text": "if ((counts.setInterval || 0) > (counts.clearInterval || 0)) flags.push(\"⚠ setInterval > clearInterval (возможная утечка)\");",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "getBoundingClientRect",
          "line": 94,
          "text": "if ((counts.getBoundingClientRect || 0) >= 10) flags.push(\"⚠ много getBoundingClientRect (дорого, особенно в scroll/raf)\");",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "removeEventListener",
          "line": 91,
          "text": "if ((counts.addEventListener || 0) > (counts.removeEventListener || 0)) flags.push(\"⚠ addEventListener > removeEventListener (возможная утечка)\");",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 35,
          "text": "{ key: \"<video\", rx: /<video\\b/gi, why: \"Видео = память+декодер+GPU\" },",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 95,
          "text": "if ((counts.autoplay || 0) >= 1 && (counts[\"<video\"] || 0) >= 1) flags.push(\"⚠ autoplay видео (может грузить/GPU/память)\");",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 108,
          "text": "+ (a.counts[\"<video\"] || 0) * 6",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 113,
          "text": "+ (b.counts[\"<video\"] || 0) * 6",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 126,
          "text": "(c[\"<video\"] || 0) * 6 +",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 133,
          "text": "console.log(`  score=${score}  rect=${c.getBoundingClientRect || 0}  video=${c[\"<video\"] || 0}  autoplay=${c.autoplay || 0}  interval=${c.setInterval || 0}  raf=${c.requestAnimationFrame || 0}`);",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<audio",
          "line": 36,
          "text": "{ key: \"<audio\", rx: /<audio\\b/gi, why: \"Аудио = доп ресурсы\" },",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<img",
          "line": 37,
          "text": "{ key: \"<img\", rx: /<img\\b/gi, why: \"Картинки без lazy часто убивают память\" },",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 96,
          "text": "if ((counts[\"<img\"] || 0) >= 5 && (counts[\"loading=lazy\"] || 0) === 0) flags.push(\"⚠ много img без loading=lazy\");",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 38,
          "text": "{ key: \"autoplay\", rx: /\\bautoPlay\\b|autoplay\\s*=/gi, why: \"Autoplay/loop → постоянная нагрузка\" },",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 95,
          "text": "if ((counts.autoplay || 0) >= 1 && (counts[\"<video\"] || 0) >= 1) flags.push(\"⚠ autoplay видео (может грузить/GPU/память)\");",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 109,
          "text": "+ (a.counts.autoplay || 0) * 6",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 114,
          "text": "+ (b.counts.autoplay || 0) * 6",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 127,
          "text": "(c.autoplay || 0) * 6 +",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 133,
          "text": "console.log(`  score=${score}  rect=${c.getBoundingClientRect || 0}  video=${c[\"<video\"] || 0}  autoplay=${c.autoplay || 0}  interval=${c.setInterval || 0}  raf=${c.requestAnimationFrame || 0}`);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 38,
          "text": "{ key: \"autoplay\", rx: /\\bautoPlay\\b|autoplay\\s*=/gi, why: \"Autoplay/loop → постоянная нагрузка\" },",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39,
          "text": "{ key: \"loop\", rx: /\\bloop\\b/gi, why: \"Loop особенно опасен на множестве карточек\" },",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 40,
          "text": "{ key: \"preload\", rx: /\\bpreload\\s*=/gi, why: \"preload=auto/metadata может забивать сеть/память\" },",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "touchmove",
          "line": 53,
          "text": "{ key: \"touchmove\", rx: /\\btouchmove\\b/gi, why: \"Touchmove легко сломать/перегрузить\" },",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 54,
          "text": "{ key: \"wheel\", rx: /\\bwheel\\b/gi, why: \"Wheel обработчики могут грузить\" },",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\tools\\audit-media.js",
      "counts": {
        "<video": 1,
        "<img": 1,
        "autoplay": 8,
        "loop": 7,
        "preload": 2
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "<video",
          "line": 43,
          "text": "const video = findLines(t, /<video\\b/i);",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 48,
          "text": "const img = findLines(t, /<img\\b/i);",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 44,
          "text": "const autoplay = findLines(t, /\\bautoPlay\\b|autoplay\\s*=/i);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 54,
          "text": "if (video.length || autoplay.length || loop.length || preload.length || img.length || create.length) {",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 56,
          "text": "if (video.length && autoplay.length) flags.push(\"⚠ video + autoplay\");",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 64,
          "text": "counts: { video: video.length, autoplay: autoplay.length, loop: loop.length, preload: preload.length, img: img.length, lazy: lazy.length, create: create.length, revoke: revoke.length },",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 68,
          "text": "autoplay: autoplay.slice(0, 3),",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 77,
          "text": "const sa = a.counts.video * 6 + a.counts.autoplay * 6 + a.counts.loop * 4 + a.counts.preload * 3 + a.counts.img + (a.counts.create - a.counts.revoke) * 10;",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 78,
          "text": "const sb = b.counts.video * 6 + b.counts.autoplay * 6 + b.counts.loop * 4 + b.counts.preload * 3 + b.counts.img + (b.counts.create - b.counts.revoke) * 10;",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 85,
          "text": "console.log(`  video=${r.counts.video} autoplay=${r.counts.autoplay} loop=${r.counts.loop} preload=${r.counts.preload} img=${r.counts.img} lazy=${r.counts.lazy} create=${r.counts.create} revoke=${r.counts.revoke}`);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 45,
          "text": "const loop = findLines(t, /\\bloop\\b/i);",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 54,
          "text": "if (video.length || autoplay.length || loop.length || preload.length || img.length || create.length) {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 57,
          "text": "if (video.length && loop.length) flags.push(\"⚠ video + loop\");",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 64,
          "text": "counts: { video: video.length, autoplay: autoplay.length, loop: loop.length, preload: preload.length, img: img.length, lazy: lazy.length, create: create.length, revoke: revoke.length },",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 77,
          "text": "const sa = a.counts.video * 6 + a.counts.autoplay * 6 + a.counts.loop * 4 + a.counts.preload * 3 + a.counts.img + (a.counts.create - a.counts.revoke) * 10;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 78,
          "text": "const sb = b.counts.video * 6 + b.counts.autoplay * 6 + b.counts.loop * 4 + b.counts.preload * 3 + b.counts.img + (b.counts.create - b.counts.revoke) * 10;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 85,
          "text": "console.log(`  video=${r.counts.video} autoplay=${r.counts.autoplay} loop=${r.counts.loop} preload=${r.counts.preload} img=${r.counts.img} lazy=${r.counts.lazy} create=${r.counts.create} revoke=${r.counts.revoke}`);",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 46,
          "text": "const preload = findLines(t, /\\bpreload\\s*=/i);",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 85,
          "text": "console.log(`  video=${r.counts.video} autoplay=${r.counts.autoplay} loop=${r.counts.loop} preload=${r.counts.preload} img=${r.counts.img} lazy=${r.counts.lazy} create=${r.counts.create} revoke=${r.counts.revoke}`);",
          "why": "preload=auto/metadata может забивать сеть/память"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\ForumAds.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 3,
        "addEventListener": 4,
        "removeEventListener": 4,
        "<video": 1,
        "<img": 1,
        "autoplay": 4,
        "loop": 2,
        "preload": 1,
        "loading=lazy": 1,
        "decoding=async": 1
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 982,
          "text": "const timer = setInterval(pickNext, rotateMs);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 985,
          "text": "clearInterval(timer);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 713,
          "text": "const timer = setTimeout(() => finish(false), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 723,
          "text": "const timer = setTimeout(() => controller.abort(), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1347,
          "text": "timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 846,
          "text": "document.addEventListener('visibilitychange', sync);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 847,
          "text": "window.addEventListener('focus', sync);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 848,
          "text": "window.addEventListener('blur', sync);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 912,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMuted);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 851,
          "text": "document.removeEventListener('visibilitychange', sync);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 852,
          "text": "window.removeEventListener('focus', sync);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 853,
          "text": "window.removeEventListener('blur', sync);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 913,
          "text": "return () => window.removeEventListener(MEDIA_MUTED_EVENT, onMuted);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 1582,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 1654,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 1237,
          "text": "autoplay: 0,",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 1301,
          "text": "emitMutedPref(true, playerIdRef.current, 'forum-ads-autoplay-fallback');",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 1606,
          "text": "allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 1630,
          "text": "allow=\"autoplay; encrypted-media; fullscreen; picture-in-picture\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 1244,
          "text": "loop: 1,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 1587,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 1589,
          "text": "preload={isNear ? 'metadata' : 'none'}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "loading=lazy",
          "line": 1658,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "decoding=async",
          "line": 1659,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\ads\\home.js",
      "counts": {
        "addEventListener": 1,
        "removeEventListener": 1,
        "<video": 2,
        "<img": 2,
        "autoplay": 2,
        "loop": 2,
        "preload": 1,
        "createObjectURL": 3,
        "revokeObjectURL": 2,
        "onScroll": 1
      },
      "flags": [
        "⚠ createObjectURL > revokeObjectURL (возможная утечка)",
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "addEventListener",
          "line": 1826,
          "text": "window.addEventListener('resize', check)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 1827,
          "text": "return () => window.removeEventListener('resize', check)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 2565,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 3037,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 2574,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 3052,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 2568,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 3039,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 2570,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 3041,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 116,
          "text": "v.preload = 'metadata'",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "createObjectURL",
          "line": 114,
          "text": "const url = URL.createObjectURL(file)",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 2131,
          "text": "url = URL.createObjectURL(file)",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 2153,
          "text": "url = URL.createObjectURL(file)",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "revokeObjectURL",
          "line": 120,
          "text": "URL.revokeObjectURL(url)",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 132,
          "text": "URL.revokeObjectURL(url)",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "onScroll",
          "line": 2189,
          "text": "onScroll={handleRulesScroll}",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\about\\page.js",
      "counts": {
        "querySelectorAll": 1,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<video": 1,
        "<img": 3,
        "autoplay": 1,
        "loop": 3,
        "preload": 1,
        "loading=lazy": 1
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "querySelectorAll",
          "line": 126,
          "text": "const imgs = root.querySelectorAll('img[data-anim=\"1\"]')",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "addEventListener",
          "line": 162,
          "text": "img.addEventListener('mouseenter', onEnter)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 169,
          "text": "try { floatAnim.cancel(); glowAnim.cancel(); img.removeEventListener('mouseenter', onEnter) } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 182,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 208,
          "text": "<img src={img.src} alt={img.alt} loading=\"lazy\" />",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 298,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 312,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 185,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 59,
          "text": "'/branding/about-loop.mp4',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 60,
          "text": "'/about-loop.mp4',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 187,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 188,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "loading=lazy",
          "line": 208,
          "text": "<img src={img.src} alt={img.alt} loading=\"lazy\" />",
          "why": "Ищем где НЕ lazy"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\BgAudio.js",
      "counts": {
        "addEventListener": 8,
        "removeEventListener": 8,
        "<audio": 1,
        "autoplay": 2,
        "preload": 1,
        "touchmove": 2,
        "wheel": 3
      },
      "flags": [],
      "hits": [
        {
          "key": "addEventListener",
          "line": 101,
          "text": "window.addEventListener('pointerdown', onGesture, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 102,
          "text": "window.addEventListener('click', onGesture, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 103,
          "text": "window.addEventListener('keydown', onGesture, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 104,
          "text": "window.addEventListener('wheel', onGesture, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 105,
          "text": "window.addEventListener('touchstart', onGesture, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 106,
          "text": "window.addEventListener('touchmove', onGesture, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 151,
          "text": "window.addEventListener('site-media-play', onMediaPlay)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 152,
          "text": "document.addEventListener('play', onAnyPlay, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 112,
          "text": "window.removeEventListener('pointerdown', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 113,
          "text": "window.removeEventListener('click', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 114,
          "text": "window.removeEventListener('keydown', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 115,
          "text": "window.removeEventListener('wheel', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 116,
          "text": "window.removeEventListener('touchstart', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 117,
          "text": "window.removeEventListener('touchmove', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 155,
          "text": "window.removeEventListener('site-media-play', onMediaPlay)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 156,
          "text": "document.removeEventListener('play', onAnyPlay, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<audio",
          "line": 199,
          "text": "<audio",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "autoplay",
          "line": 14,
          "text": "const [locked, setLocked] = useState(true) // браузер запретил autoplay со звуком",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 53,
          "text": "// autoplay со звуком запрещён → играем тихо",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "preload",
          "line": 202,
          "text": "preload=\"auto\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "touchmove",
          "line": 106,
          "text": "window.addEventListener('touchmove', onGesture, { passive: true, capture: true })",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "touchmove",
          "line": 117,
          "text": "window.removeEventListener('touchmove', onGesture, true)",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 104,
          "text": "window.addEventListener('wheel', onGesture, { passive: true, capture: true })",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 115,
          "text": "window.removeEventListener('wheel', onGesture, true)",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 213,
          "text": "? `Sound on • ${Math.round(vol * 100)}% (wheel to change)`",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\exchange\\page.js",
      "counts": {
        "setInterval": 4,
        "clearInterval": 5,
        "setTimeout": 3,
        "addEventListener": 9,
        "removeEventListener": 6
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 1469,
          "text": "tickerRef.current = setInterval(async () => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 1572,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 1590,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 1687,
          "text": "const id = setInterval(load, 3000)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 1463,
          "text": "if (tickerRef.current) { clearInterval(tickerRef.current); tickerRef.current = null }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1511,
          "text": "if (tickerRef.current) { clearInterval(tickerRef.current); tickerRef.current = null }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1584,
          "text": "clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1597,
          "text": "return () => clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1691,
          "text": "clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 412,
          "text": "const tick=()=>{ if (window.TradingView) cb(); else setTimeout(tick,40) }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 709,
          "text": "setTimeout(tick, speed)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1023,
          "text": "setTimeout(()=> resolve(getAcc()), 120000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 1021,
          "text": "window.addEventListener('auth:ok', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1022,
          "text": "window.addEventListener('auth:success', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1578,
          "text": "window.addEventListener('pagehide', onHide)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1579,
          "text": "document.addEventListener('visibilitychange', () => {",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1611,
          "text": "window.addEventListener('vip:refresh', onRefresh)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1612,
          "text": "window.addEventListener('focus', onFocus)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1613,
          "text": "document.addEventListener('visibilitychange', onVis)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1614,
          "text": "window.addEventListener('auth:ok', onRefresh)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 2134,
          "text": "window.addEventListener('open-unlimit', open)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 1585,
          "text": "window.removeEventListener('pagehide', onHide)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1616,
          "text": "window.removeEventListener('vip:refresh', onRefresh)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1617,
          "text": "window.removeEventListener('focus', onFocus)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1618,
          "text": "document.removeEventListener('visibilitychange', onVis)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1619,
          "text": "window.removeEventListener('auth:ok', onRefresh)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 2135,
          "text": "return () => window.removeEventListener('open-unlimit', open)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\page.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 3,
        "setTimeout": 2,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<img": 1,
        "autoplay": 1,
        "loading=lazy": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 157,
          "text": "const tmr = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 162,
          "text": "clearInterval(tmr)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 164,
          "text": "if (tries > 25) clearInterval(tmr) // ~2.5 сек",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 169,
          "text": "clearInterval(tmr)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 30,
          "text": "const t = setTimeout(() => controller.abort(), 3000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 41,
          "text": "const t = setTimeout(() => controller.abort(), 3000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 147,
          "text": "window.addEventListener('tg:link-status', onStatus)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 168,
          "text": "window.removeEventListener('tg:link-status', onStatus)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 266,
          "text": "{/* ← заменено <img> на <Image/> в двух иконках */}",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 101,
          "text": "allow=\"autoplay; encrypted-media; picture-in-picture\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loading=lazy",
          "line": 88,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 103,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\ScrollTopPulse.js",
      "counts": {
        "setTimeout": 4,
        "requestAnimationFrame": 3,
        "cancelAnimationFrame": 2,
        "addEventListener": 7,
        "removeEventListener": 7,
        "loop": 1,
        "onScroll": 1,
        "touchmove": 2,
        "wheel": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 27,
          "text": "spinTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 131,
          "text": "hideTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 188,
          "text": "appearTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 211,
          "text": "appearTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "requestAnimationFrame",
          "line": 279,
          "text": "rafRef.current = requestAnimationFrame(step)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 325,
          "text": "rafRef.current = requestAnimationFrame(step)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 328,
          "text": "rafRef.current = requestAnimationFrame(step)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 71,
          "text": "cancelAnimationFrame(rafRef.current)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 341,
          "text": "cancelAnimationFrame(rafRef.current)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 84,
          "text": "window.addEventListener('wheel', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 85,
          "text": "window.addEventListener('touchstart', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 86,
          "text": "window.addEventListener('touchmove', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 87,
          "text": "window.addEventListener('pointerdown', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 88,
          "text": "window.addEventListener('mousedown', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 89,
          "text": "window.addEventListener('keydown', cancelScroll, { capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 227,
          "text": "window.addEventListener('scroll', onScroll, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 52,
          "text": "window.removeEventListener('wheel', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 53,
          "text": "window.removeEventListener('touchstart', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 54,
          "text": "window.removeEventListener('touchmove', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 55,
          "text": "window.removeEventListener('pointerdown', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 56,
          "text": "window.removeEventListener('mousedown', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 57,
          "text": "window.removeEventListener('keydown', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 230,
          "text": "window.removeEventListener('scroll', onScroll)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "loop",
          "line": 266,
          "text": "// Не \"подпрыгиваем\" от чтения window.scrollY каждый кадр (feedback loop),",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "onScroll",
          "line": 136,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "touchmove",
          "line": 54,
          "text": "window.removeEventListener('touchmove', cancelScroll, { capture: true })",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "touchmove",
          "line": 86,
          "text": "window.addEventListener('touchmove', cancelScroll, { passive: true, capture: true })",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 52,
          "text": "window.removeEventListener('wheel', cancelScroll, { capture: true })",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 84,
          "text": "window.addEventListener('wheel', cancelScroll, { passive: true, capture: true })",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\SnowFX.jsx",
      "counts": {
        "requestAnimationFrame": 3,
        "cancelAnimationFrame": 1,
        "addEventListener": 3,
        "removeEventListener": 3,
        "loop": 4,
        "onScroll": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "requestAnimationFrame",
          "line": 235,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 302,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 305,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 311,
          "text": "if (rafId) cancelAnimationFrame(rafId)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 201,
          "text": "window.addEventListener('resize', onResize)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 364,
          "text": "window.addEventListener('pointerdown', onPointerDown, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 423,
          "text": "window.addEventListener('scroll', onScroll, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 202,
          "text": "return () => window.removeEventListener('resize', onResize)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 365,
          "text": "return () => window.removeEventListener('pointerdown', onPointerDown)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 424,
          "text": "return () => window.removeEventListener('scroll', onScroll)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "loop",
          "line": 217,
          "text": "const loop = (ts) => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 235,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 302,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 305,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "onScroll",
          "line": 375,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\exchange\\BattleCoin.jsx",
      "counts": {
        "setInterval": 2,
        "clearInterval": 2,
        "setTimeout": 2,
        "addEventListener": 4,
        "removeEventListener": 4
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 228,
          "text": "const id = setInterval(() => setNowTs(Date.now()), 1000)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 328,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 229,
          "text": "return () => clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 332,
          "text": "return () => clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 61,
          "text": "const timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 412,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 100,
          "text": "window.addEventListener('auth:ok', onAuthOk)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 101,
          "text": "window.addEventListener('auth:logout', onLogout)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 317,
          "text": "window.addEventListener('auth:ok', onAuthOk)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 318,
          "text": "window.addEventListener('auth:logout', onLogout)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 93,
          "text": "window.removeEventListener('auth:ok', onAuthOk)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 96,
          "text": "window.removeEventListener('auth:logout', onLogout)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 322,
          "text": "try { window.removeEventListener('auth:ok', onAuthOk) } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 323,
          "text": "try { window.removeEventListener('auth:logout', onLogout) } catch {}",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\QCoinDropFX.jsx",
      "counts": {
        "setTimeout": 7,
        "requestAnimationFrame": 2,
        "cancelAnimationFrame": 1,
        "addEventListener": 5,
        "removeEventListener": 5,
        "loop": 3,
        "onScroll": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 603,
          "text": "tId = setTimeout(step, 40)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 614,
          "text": "tId = setTimeout(step, 90)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 618,
          "text": "tId = setTimeout(step, s.speed)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 621,
          "text": "tId = setTimeout(step, 40)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 712,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 717,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 722,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "requestAnimationFrame",
          "line": 454,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 457,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 463,
          "text": "if (rafId) cancelAnimationFrame(rafId)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 335,
          "text": "window.addEventListener('auth:ok', onAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 336,
          "text": "window.addEventListener('auth:success', onAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 355,
          "text": "window.addEventListener('resize', onResize)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 504,
          "text": "window.addEventListener('pointerdown', onPointerDown, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 538,
          "text": "window.addEventListener('scroll', onScroll, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 346,
          "text": "window.removeEventListener('auth:ok', onAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 347,
          "text": "window.removeEventListener('auth:success', onAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 356,
          "text": "return () => window.removeEventListener('resize', onResize)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 505,
          "text": "return () => window.removeEventListener('pointerdown', onPointerDown)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 539,
          "text": "return () => window.removeEventListener('scroll', onScroll)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "loop",
          "line": 366,
          "text": "const loop = (ts) => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 454,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 457,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "onScroll",
          "line": 514,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\tools\\audit-effects.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "requestAnimationFrame": 1,
        "cancelAnimationFrame": 1,
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 71,
          "text": "if (si > ci) flags.push(`⚠ setInterval(${si}) > clearInterval(${ci})`);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 71,
          "text": "if (si > ci) flags.push(`⚠ setInterval(${si}) > clearInterval(${ci})`);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "requestAnimationFrame",
          "line": 72,
          "text": "if (raf > caf) flags.push(`⚠ requestAnimationFrame(${raf}) > cancelAnimationFrame(${caf})`);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 72,
          "text": "if (raf > caf) flags.push(`⚠ requestAnimationFrame(${raf}) > cancelAnimationFrame(${caf})`);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 70,
          "text": "if (add > rem) flags.push(`⚠ addEventListener(${add}) > removeEventListener(${rem})`);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 70,
          "text": "if (add > rem) flags.push(`⚠ addEventListener(${add}) > removeEventListener(${rem})`);",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\academy\\AcademyExamBlock.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 3,
        "addEventListener": 4,
        "removeEventListener": 2
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 483,
          "text": "const id = setInterval(function () {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 487,
          "text": "clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 99,
          "text": "setTimeout(function () {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 733,
          "text": "setTimeout(async function () {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 813,
          "text": "setTimeout(function () {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 96,
          "text": "window.addEventListener('auth:ok', done, { once: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 97,
          "text": "window.addEventListener('auth:success', done, { once: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 607,
          "text": "window.addEventListener('auth:ok', handleAuthEvent)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 608,
          "text": "window.addEventListener('auth:success', handleAuthEvent)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 611,
          "text": "window.removeEventListener('auth:ok', handleAuthEvent)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 612,
          "text": "window.removeEventListener('auth:success', handleAuthEvent)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\api\\forum\\events\\stream\\route.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 2,
        "addEventListener": 1,
        "loop": 2
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 121,
          "text": "const hb = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 126,
          "text": "clearInterval(hb)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 80,
          "text": "await new Promise((r) => setTimeout(r, waitMs))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 87,
          "text": "await new Promise((r) => setTimeout(r, waitMs))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 135,
          "text": "else signal.addEventListener('abort', close, { once: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "loop",
          "line": 57,
          "text": "const loop = async () => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 94,
          "text": "loop().finally(() => { S.subRunning = false })",
          "why": "Loop особенно опасен на множестве карточек"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\components\\CryptoNewsLens.jsx",
      "counts": {
        "setInterval": 1,
        "clearInterval": 4,
        "setTimeout": 1,
        "addEventListener": 2,
        "removeEventListener": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 779,
          "text": "progressTimerRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 772,
          "text": "if (progressTimerRef.current) clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 785,
          "text": "clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 805,
          "text": "clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 824,
          "text": "clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 790,
          "text": "timerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 916,
          "text": "document.addEventListener('mousedown', onClickOutside)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 934,
          "text": "window.addEventListener('keydown', onKeyDown)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 917,
          "text": "return () => document.removeEventListener('mousedown', onClickOutside)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 935,
          "text": "return () => window.removeEventListener('keydown', onKeyDown)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\InviteFriendProvider.jsx",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "addEventListener": 4,
        "removeEventListener": 4,
        "wheel": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 207,
          "text": "const id = window.setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 225,
          "text": "window.clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "addEventListener",
          "line": 155,
          "text": "window.addEventListener('auth:ok', handleAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 156,
          "text": "window.addEventListener('auth:success', handleAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 176,
          "text": "window.addEventListener('invite:open', handler)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 195,
          "text": "events.forEach((ev) => window.addEventListener(ev, onActivity))",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 159,
          "text": "window.removeEventListener('auth:ok', handleAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 160,
          "text": "window.removeEventListener('auth:success', handleAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 178,
          "text": "window.removeEventListener('invite:open', handler)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 197,
          "text": "events.forEach((ev) => window.removeEventListener(ev, onActivity))",
          "why": "Проверяем парность с add"
        },
        {
          "key": "wheel",
          "line": 193,
          "text": "const events = ['pointerdown', 'keydown', 'wheel', 'touchstart', 'focus', 'scroll', 'visibilitychange']",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\NotRobot.jsx",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 5,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<img": 2,
        "decoding=async": 3
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 177,
          "text": "rbCountdownIntervalRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 125,
          "text": "clearInterval(rbCountdownIntervalRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 185,
          "text": "rbRedirectTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 271,
          "text": "rbIdleTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 319,
          "text": "rbCloseOverlayTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 376,
          "text": "else setTimeout(() => rbPreloadImages(), 300);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 381,
          "text": "rbFirstShowTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 406,
          "text": "window.addEventListener(evt, activityHandler, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 415,
          "text": "window.removeEventListener(evt, activityHandler)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 493,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 521,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "decoding=async",
          "line": 167,
          "text": "img.decoding = \"async\";",
          "why": "Полезно для img"
        },
        {
          "key": "decoding=async",
          "line": 498,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        },
        {
          "key": "decoding=async",
          "line": 526,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\public\\compat.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "addEventListener": 3
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 41,
          "text": "const t = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 43,
          "text": "if (setTmaFlag() || tries >= maxTries) clearInterval(t);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "addEventListener",
          "line": 53,
          "text": "window.addEventListener('resize', setVhVars);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 87,
          "text": "document.addEventListener('click', (e) => {",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 116,
          "text": "document.addEventListener('click', (e) => {",
          "why": "Если без remove → утечки и лаги"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\ads\\page.jsx",
      "counts": {
        "querySelectorAll": 1,
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "querySelectorAll",
          "line": 66,
          "text": "const imgs = root.querySelectorAll('img[data-anim=\"1\"]')",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "addEventListener",
          "line": 107,
          "text": "img.addEventListener('mouseenter', onEnter)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 117,
          "text": "img.removeEventListener('mouseenter', onEnter)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\ads.js",
      "counts": {
        "setTimeout": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 126,
          "text": "timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\api\\quotes\\route.js",
      "counts": {
        "setTimeout": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 34,
          "text": "const sleep = (ms) => new Promise(r => setTimeout(r, ms))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 38,
          "text": "const id = setTimeout(() => reject(new Error('timeout')), ms)",
          "why": "Может заспамить ререндер/таймеры"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\page.js",
      "counts": {
        "loading=lazy": 1,
        "decoding=async": 1,
        "onScroll": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "loading=lazy",
          "line": 87,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "decoding=async",
          "line": 88,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        },
        {
          "key": "onScroll",
          "line": 170,
          "text": "onScroll={handleScroll}",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\SharePopover.jsx",
      "counts": {
        "setTimeout": 1,
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 33,
          "text": "const id = window.setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 50,
          "text": "document.addEventListener('keydown', onKey, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 51,
          "text": "return () => document.removeEventListener('keydown', onKey, true)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\subscribe\\subscribe.client.jsx",
      "counts": {
        "setTimeout": 2,
        "addEventListener": 5,
        "removeEventListener": 3
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setTimeout",
          "line": 36,
          "text": "setTimeout(()=> resolve(getAcc()), 120000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 225,
          "text": "setTimeout(() => { refreshVip() }, 5000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 34,
          "text": "window.addEventListener('auth:ok', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 35,
          "text": "window.addEventListener('auth:success', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 209,
          "text": "window.addEventListener('focus', onFocus)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 210,
          "text": "document.addEventListener('visibilitychange', onVis)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 211,
          "text": "window.addEventListener('auth:ok', onAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 213,
          "text": "window.removeEventListener('focus', onFocus)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 214,
          "text": "document.removeEventListener('visibilitychange', onVis)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 215,
          "text": "window.removeEventListener('auth:ok', onAuth)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\AuthNavClient.jsx",
      "counts": {
        "setTimeout": 1,
        "addEventListener": 2,
        "removeEventListener": 2,
        "<img": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 319,
          "text": "const delay = (ms) => new Promise(r => setTimeout(r, ms))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 187,
          "text": "window.addEventListener('auth:ok', onAuthOk)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 200,
          "text": "window.addEventListener('open-auth', handler)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 188,
          "text": "return () => window.removeEventListener('auth:ok', onAuthOk)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 201,
          "text": "return () => window.removeEventListener('open-auth', handler)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 388,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\HeroAvatar.js",
      "counts": {
        "setTimeout": 2,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<img": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 76,
          "text": "setTimeout(spawn, spawnEvery)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 78,
          "text": "const t = setTimeout(spawn, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 93,
          "text": "window.addEventListener('mousemove', onMove)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 94,
          "text": "return () => window.removeEventListener('mousemove', onMove)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 138,
          "text": "{/* ПОСТЕР: всегда обычный <img>, без next/image оптимизации */}",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 142,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\i18n.js",
      "counts": {
        "loop": 45
      },
      "flags": [],
      "hits": [
        {
          "key": "loop",
          "line": 72,
          "text": "`Quantum L7 AI is a cross-platform ecosystem: the AI core, autonomous L7 agents, on-chain monitoring, normalized market feeds, the forum social network, and the QCoin economy are combined into a single computational fabric. Every artifact — a transaction, a news narrative, a post, a liquidity chart — enters the common data loop and becomes a call to action.`,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 77,
          "text": "`The forum is embedded into the loop: content passes AI scoring (quality, engagement, anti-spam/anti-sybil), and activity is mapped into the QCoin economy. This is not a “social network for likes” but a targeted cognitive bus where knowledge and contribution are converted into tokenized value.`,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 11593,
          "text": "qa_ai_1210_q: 'What does \"human-in-the-loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12148,
          "text": "qa_meta_1395_q: 'What is the \"user feedback loop\" for definitions?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12361,
          "text": "qa_ai_1466_q: 'What does \"human-in-the-loop moderation of knowledge\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12697,
          "text": "qa_meta_1578_q: 'What does \"continuous reasoning loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13057,
          "text": "qa_meta_1698_q: 'What does \"education arbitrage loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13159,
          "text": "qa_meta_1732_q: 'What does \"collective cognition loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13160,
          "text": "qa_meta_1732_a: 'A closed loop in which the community trains AI, and AI trains the community, reinforcing shared understanding.',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16041,
          "text": "qa_ai_1210_q: 'Что означает “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16596,
          "text": "qa_meta_1395_q: 'Что такое “user feedback loop” для определений?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16809,
          "text": "qa_ai_1466_q: 'Что означает “human-in-the-loop модерация знаний”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 17145,
          "text": "qa_meta_1578_q: 'Что означает “continuous reasoning loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 17504,
          "text": "qa_meta_1698_q: 'Что означает “education arbitrage loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 17606,
          "text": "qa_meta_1732_q: 'Что означает “collective cognition loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 20472,
          "text": "qa_ai_1210_q: 'Що означає “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21027,
          "text": "qa_meta_1395_q: 'Що таке “user feedback loop” для определений?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21240,
          "text": "qa_ai_1466_q: 'Що означає “human-in-the-loop модерація знань”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21576,
          "text": "qa_meta_1578_q: 'Що означає “continuous reasoning loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21936,
          "text": "qa_meta_1698_q: 'Що означає “education arbitrage loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 22038,
          "text": "qa_meta_1732_q: 'Що означає “collective cognition loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 24904,
          "text": "qa_ai_1210_q: '¿Qué significa “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 25459,
          "text": "qa_meta_1395_q: '¿Qué es el “user feedback loop” para definiciones?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 25672,
          "text": "qa_ai_1466_q: '¿Qué significa “human-in-the-loop moderación del conocimiento”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26008,
          "text": "qa_meta_1578_q: '¿Qué significa “continuous reasoning loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26368,
          "text": "qa_meta_1698_q: '¿Qué significa “education arbitrage loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26470,
          "text": "qa_meta_1732_q: '¿Qué significa “collective cognition loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 29340,
          "text": "qa_ai_1210_q: '“human-in-the-loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 29895,
          "text": "qa_meta_1395_q: '什么是 “user feedback loop” 对定义？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30108,
          "text": "qa_ai_1466_q: '“human-in-the-loop 知识审核” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30444,
          "text": "qa_meta_1578_q: '“continuous reasoning loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30804,
          "text": "qa_meta_1698_q: '“education arbitrage loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30906,
          "text": "qa_meta_1732_q: '“collective cognition loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 33776,
          "text": "qa_ai_1210_q: 'ماذا يعني “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 34331,
          "text": "qa_meta_1395_q: 'ما هو “user feedback loop” للتعريفات؟',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 34544,
          "text": "qa_ai_1466_q: 'ماذا يعني \"human-in-the-loop модерация знаний\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 34880,
          "text": "qa_meta_1578_q: 'ماذا يعني \"continuous reasoning loop\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 35240,
          "text": "qa_meta_1698_q: 'ماذا يعني \"education arbitrage loop\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 35342,
          "text": "qa_meta_1732_q: 'ماذا يعني \"collective cognition loop\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 38212,
          "text": "qa_ai_1210_q: '\"human-in-the-loop\" ne anlama gelir?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 38767,
          "text": "qa_meta_1395_q: '\"user feedback loop\" (tanımlar için) nedir?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 38980,
          "text": "qa_ai_1466_q: '“human-in-the-loop bilgi moderasyonu” ne anlama geliyor?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39316,
          "text": "qa_meta_1578_q: '“continuous reasoning loop” ne anlama geliyor?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39676,
          "text": "qa_meta_1698_q: '“education arbitrage loop” ne anlama gelir?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39778,
          "text": "qa_meta_1732_q: '“collective cognition loop” ne anlama gelir?',",
          "why": "Loop особенно опасен на множестве карточек"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\InviteFriendPopup.jsx",
      "counts": {
        "addEventListener": 2,
        "removeEventListener": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "addEventListener",
          "line": 35,
          "text": "window.addEventListener('resize', handleResize)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 61,
          "text": "window.addEventListener('keydown', handleKey)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 36,
          "text": "return () => window.removeEventListener('resize', handleResize)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 62,
          "text": "return () => window.removeEventListener('keydown', handleKey)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\TopBar.js",
      "counts": {
        "addEventListener": 1
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "addEventListener",
          "line": 34,
          "text": "window.addEventListener('auth:logout', onLogout)",
          "why": "Если без remove → утечки и лаги"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\UnlimitModal.client.jsx",
      "counts": {
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "addEventListener",
          "line": 10,
          "text": "window.addEventListener('keydown', onKey)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 11,
          "text": "return () => window.removeEventListener('keydown', onKey)",
          "why": "Проверяем парность с add"
        }
      ]
    }
  ]
}