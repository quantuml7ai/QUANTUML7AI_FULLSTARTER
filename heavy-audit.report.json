{
  "root": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter",
  "generatedAt": "2026-02-15T22:24:33.724Z",
  "report": [
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\Forum.jsx",
      "counts": {
        "setInterval": 15,
        "clearInterval": 18,
        "setTimeout": 54,
        "requestAnimationFrame": 32,
        "cancelAnimationFrame": 11,
        "getBoundingClientRect": 21,
        "querySelectorAll": 18,
        "addEventListener": 74,
        "removeEventListener": 71,
        "<video": 14,
        "<audio": 5,
        "<img": 9,
        "autoplay": 12,
        "loop": 18,
        "preload": 18,
        "loading=lazy": 13,
        "createObjectURL": 4,
        "revokeObjectURL": 10,
        "onScroll": 6,
        "touchmove": 2,
        "wheel": 2
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)",
        "⚠ много getBoundingClientRect (дорого, особенно в scroll/raf)",
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 1570,
          "text": "const id = setInterval(async function(){",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 12153,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 12258,
          "text": "const id=setInterval(upd,3000)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 12721,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 13082,
          "text": "// Вместо setInterval(querySelectorAll...) — MutationObserver на новые медиа-узлы",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 13730,
          "text": "const id = setInterval(()=>{ if (visibleRef.current) activeRef.current = true }, 20000);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 14028,
          "text": "const id = setInterval(runTick, TICK_MS);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 15388,
          "text": "const t = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 15399,
          "text": "const t = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 16557,
          "text": "const id = setInterval(() => setCooldownLeft(s => Math.max(0, s - 1)), 1000);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 16678,
          "text": "mediaProgRef.current.timer = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 16813,
          "text": "recTimerRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 17046,
          "text": "videoTimerRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 18126,
          "text": "const tick = setInterval(observeAll, 900);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 23005,
          "text": "const id = setInterval(() => __setQuestTick(x => (x + 1) & 1023), 1000);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 1656,
          "text": "return function(){ clearInterval(id); };",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 12170,
          "text": "try { clearInterval(id); } catch {}",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 12259,
          "text": "return ()=>{ window.removeEventListener('auth:ok',upd); window.removeEventListener('auth:success',upd); clearInterval(id) }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 12716,
          "text": "if (id) clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 13135,
          "text": "ytMutePolls.forEach((id) => clearInterval(id));",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 13731,
          "text": "return ()=> clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 14033,
          "text": "clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 15392,
          "text": "return () => { try { clearInterval(t); } catch {} };",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 15406,
          "text": "return () => { try { clearInterval(t); } catch {} };",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 16558,
          "text": "return () => clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 16660,
          "text": "if (t) { try { clearInterval(t); } catch {} }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 16812,
          "text": "clearInterval(recTimerRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 16828,
          "text": "clearInterval(recTimerRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 17003,
          "text": "clearInterval(videoTimerRef.current); videoTimerRef.current = null;",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 17045,
          "text": "clearInterval(videoTimerRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 17066,
          "text": "videoMirrorRef.current = null;  clearInterval(videoTimerRef.current); videoTimerRef.current = null;",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 18129,
          "text": "clearInterval(tick);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 23006,
          "text": "return () => clearInterval(id);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 454,
          "text": "const timer = setTimeout(() => cancel(), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 860,
          "text": "const id = setTimeout(() => set(null), 6500);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1361,
          "text": "return setTimeout(fn, 120);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1480,
          "text": "const timeoutId  = setTimeout(() => controller.abort(), 8000);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1602,
          "text": "const timeoutId  = setTimeout(() => controller.abort(), 8000);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 7575,
          "text": "timerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 8469,
          "text": "const h = setTimeout(async () => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 9546,
          "text": "window.setTimeout(() => node.classList.remove('replyTargetFlash'), 1100);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 10575,
          "text": "await new Promise(r => setTimeout(r, 30));",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 10594,
          "text": "setTimeout(calcAspectFromTrack, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 10641,
          "text": "setTimeout(calcAspectFromTrack, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 11309,
          "text": "unloadTimer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 11389,
          "text": "hideTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 12541,
          "text": "return setTimeout(fn, 120);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 12692,
          "text": "else setTimeout(check, 60);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 12862,
          "text": "const id = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 13380,
          "text": "flushSoonTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 14096,
          "text": "sseSyncTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 14212,
          "text": "setTimeout(() => { try { alignInboxStartUnderTabsEvent(); } catch {} }, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 14477,
          "text": "setTimeout(scrollToThreadStart, 0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 14614,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(applyComp)); } catch { try { setTimeout(applyComp, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15323,
          "text": "dmDialogsPersistTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15343,
          "text": "dmThreadPersistTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15816,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15819,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15907,
          "text": "try { setTimeout(maybeRecenter, 280); } catch {}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15908,
          "text": "try { setTimeout(maybeRecenter, 900); } catch {}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15930,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15940,
          "text": "window.setTimeout(() => node.classList.remove('replyTargetFlash'), 1100);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15945,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 15948,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 16024,
          "text": "const sleep = (ms) => new Promise((r) => setTimeout(r, ms))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 16052,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 16229,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 16873,
          "text": "setTimeout(resolve, 400);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 17313,
          "text": "setTimeout(done, 1200); // fallback",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 17368,
          "text": "setTimeout(() => resolve(false), 900);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18036,
          "text": "rec.t = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18701,
          "text": "try { setTimeout(() => document.querySelector('[data-forum-video-start=\"1\"]')?.scrollIntoView({ behavior:'auto', block:'start' }), 0); } catch {}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18780,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 18901,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(apply)); } catch { try { setTimeout(apply, 0); } catch {} }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 19026,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 19034,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20145,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20542,
          "text": "await new Promise(r => setTimeout(r, 2000));",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20680,
          "text": "setTimeout(() => { try { window.__forumToggleCreateTopic?.() } catch {} }, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 20744,
          "text": "setTimeout(()=>document.querySelector('[data-forum-topics-start=\"1\"]')?.scrollIntoView({block:'start'}),0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 21675,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 22073,
          "text": "await new Promise(r => setTimeout(r, 2000));",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 22211,
          "text": "setTimeout(() => { try { window.__forumToggleCreateTopic?.() } catch {} }, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 22274,
          "text": "setTimeout(()=>document.querySelector('[data-forum-topics-start=\"1\"]')?.scrollIntoView({block:'start'}),0);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23342,
          "text": "onClick={() => { setTimeout(() => onMarkDone?.(q.id, tid), 0); }}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23350,
          "text": "onClick={() => { setTimeout(() => onMarkDone?.(q.id, tid), 0); }}",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 23409,
          "text": "const id = setTimeout(() => { try { titleRef.current?.focus?.() } catch {} }, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "requestAnimationFrame",
          "line": 7780,
          "text": "rafRef.current = window.requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 8129,
          "text": "rafRef.current = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 9562,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 9563,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 10342,
          "text": "rafId = requestAnimationFrame(bindStream);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 11067,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 11071,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 11660,
          "text": "rafRef.current = requestAnimationFrame(tick);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 11662,
          "text": "rafRef.current = requestAnimationFrame(tick);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 12162,
          "text": "raf = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 12991,
          "text": "rafId = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 13269,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 14475,
          "text": "requestAnimationFrame(() => requestAnimationFrame(scrollToThreadStart));",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 14566,
          "text": "raf = window.requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 14614,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(applyComp)); } catch { try { setTimeout(applyComp, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15816,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15819,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15906,
          "text": "try { requestAnimationFrame(maybeRecenter); } catch {}",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15919,
          "text": "rafId = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15945,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 16); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 15948,
          "text": "try { requestAnimationFrame(tick); } catch { try { setTimeout(tick, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 16545,
          "text": "requestAnimationFrame(() => requestAnimationFrame(apply));",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 16904,
          "text": "rafId = requestAnimationFrame(loop);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18824,
          "text": "try { requestAnimationFrame(() => alignInboxStartUnderTabs(attempt + 1)); } catch {}",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18839,
          "text": "try { requestAnimationFrame(() => alignInboxStartUnderTabs(attempt + 1)); } catch {}",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 18901,
          "text": "try { requestAnimationFrame(() => requestAnimationFrame(apply)); } catch { try { setTimeout(apply, 0); } catch {} }",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19462,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19463,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19481,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19482,
          "text": "requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19672,
          "text": "vfRafRef.current = requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 19845,
          "text": "rafGuardRef.current = window.requestAnimationFrame(() => {",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 7800,
          "text": "cancelAnimationFrame(rafRef.current)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 8127,
          "text": "if (rafRef.current) cancelAnimationFrame(rafRef.current);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 10348,
          "text": "if (rafId) cancelAnimationFrame(rafId);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 11648,
          "text": "if (rafRef.current) cancelAnimationFrame(rafRef.current);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 12177,
          "text": "try { if (raf) cancelAnimationFrame(raf); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 13100,
          "text": "try { if (rafId) cancelAnimationFrame(rafId); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 14635,
          "text": "if (raf) { try { window.cancelAnimationFrame(raf) } catch {} raf = 0; }",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 15933,
          "text": "if (rafId) { try { cancelAnimationFrame(rafId); } catch {} }",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 16911,
          "text": "try { if (rafId) cancelAnimationFrame(rafId); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 16919,
          "text": "try { if (rafId) cancelAnimationFrame(rafId); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 19693,
          "text": "try { cancelAnimationFrame(vfRafRef.current); } catch {}",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "getBoundingClientRect",
          "line": 38,
          "text": "try { lastHRef.current = el.getBoundingClientRect().height || 0; } catch {}",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 45,
          "text": "try { h = node.getBoundingClientRect().height || 0; } catch { h = 0; }",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 7047,
          "text": "const rect = el.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 7148,
          "text": "const r = btn.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 7249,
          "text": "const r = btn.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 7311,
          "text": "const r = btn.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 7738,
          "text": "const rect = anchorEl.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 7739,
          "text": "const popRect = popEl.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8221,
          "text": "const r = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 8511,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 11731,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 12325,
          "text": "const rect = anchorEl.getBoundingClientRect()",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 15768,
          "text": "const contRect = scrollEl.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 15769,
          "text": "const r = node.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18844,
          "text": "const tabsRect = tabs.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18845,
          "text": "const firstRect = first.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18877,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18919,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18920,
          "text": "const contRect = scrollEl.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 18930,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "getBoundingClientRect",
          "line": 19848,
          "text": "const rect = el.getBoundingClientRect();",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "querySelectorAll",
          "line": 1407,
          "text": "const list = Array.from(document.querySelectorAll(selector));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12071,
          "text": "const videos = Array.from(document.querySelectorAll(\"video\"));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12449,
          "text": "document.querySelectorAll('iframe[data-forum-media]').forEach((frame) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12472,
          "text": "document.querySelectorAll('video').forEach((v) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12478,
          "text": "document.querySelectorAll('audio').forEach((a) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12495,
          "text": "document.querySelectorAll('video').forEach((v) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12501,
          "text": "document.querySelectorAll('audio').forEach((a) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12578,
          "text": "document.querySelectorAll(selector).forEach(prepare);",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12602,
          "text": "document.querySelectorAll(selector).forEach((v) => io.observe(v));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 12635,
          "text": "document.querySelectorAll('[data-forum-media]').forEach((el) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 13077,
          "text": "try { document.querySelectorAll(selector).forEach(observeOne); } catch {}",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 13115,
          "text": "document.querySelectorAll(selector).forEach((el) => {",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 14940,
          "text": "const nodes = document.querySelectorAll('.inboxReplyItem[data-reply-id]');",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15443,
          "text": "const nodes = document.querySelectorAll('.dmMsgRow[data-dm-ts]');",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 15470,
          "text": "const nodes = document.querySelectorAll('.dmRow[data-dm-uid]');",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 18047,
          "text": "const cards = Array.from(document.querySelectorAll(CARD_SELECTOR));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 18057,
          "text": ".querySelectorAll('video[data-forum-video=\"post\"]')",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "querySelectorAll",
          "line": 18119,
          "text": "document.querySelectorAll(CARD_SELECTOR).forEach((el) => io.observe(el));",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "addEventListener",
          "line": 449,
          "text": "window.addEventListener('auth:ok', ok, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 450,
          "text": "window.addEventListener('auth:success', ok, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 451,
          "text": "window.addEventListener('auth:cancel', cancel, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 452,
          "text": "window.addEventListener('auth:fail', cancel, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1436,
          "text": "document.addEventListener('play', onPlay, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1437,
          "text": "document.addEventListener('pause', onStop, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1438,
          "text": "document.addEventListener('ended', onStop, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1545,
          "text": "root.addEventListener(e, onAny, {passive:true});",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1547,
          "text": "document.addEventListener('visibilitychange', onVis);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1548,
          "text": "window.addEventListener('focus', onAny);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 7333,
          "text": "document.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 7334,
          "text": "document.addEventListener('pointerdown', onClick);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 7794,
          "text": "window.addEventListener('scroll', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 7795,
          "text": "window.addEventListener('resize', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 7818,
          "text": "document.addEventListener('pointerdown', onDown, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 7819,
          "text": "document.addEventListener('keydown', onKey, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8244,
          "text": "window.addEventListener('resize', applySize, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8897,
          "text": "window.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 8987,
          "text": "window.addEventListener('keydown', onKey);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 10460,
          "text": "v.addEventListener('play', onPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 10461,
          "text": "v.addEventListener('pause', onPause);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 10462,
          "text": "v.addEventListener('ended', onEnd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11051,
          "text": "window.addEventListener('wheel', prevent, { passive: false });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11052,
          "text": "window.addEventListener('touchmove', prevent, { passive: false });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11268,
          "text": "try { el.addEventListener('volumechange', onVol); } catch {}",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11269,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11410,
          "text": "audio.addEventListener('loadedmetadata', onMeta);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11411,
          "text": "audio.addEventListener('durationchange', onMeta);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11412,
          "text": "audio.addEventListener('timeupdate', onTime);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11413,
          "text": "audio.addEventListener('play', onPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11414,
          "text": "audio.addEventListener('pause', onPause);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11415,
          "text": "audio.addEventListener('volumechange', onVolume);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11426,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11686,
          "text": "a.addEventListener('loadedmetadata', onLoaded);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11687,
          "text": "a.addEventListener('play', onPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11688,
          "text": "a.addEventListener('pause', onPause);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 11689,
          "text": "a.addEventListener('ended', onEnded);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12146,
          "text": "window.addEventListener(\"error\", onErr);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12147,
          "text": "window.addEventListener(\"unhandledrejection\", onRej);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12148,
          "text": "document.addEventListener(\"visibilitychange\", onVis);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12149,
          "text": "window.addEventListener(\"pagehide\", onHide);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12150,
          "text": "window.addEventListener(\"beforeunload\", onBeforeUnload);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12167,
          "text": "window.addEventListener(\"scroll\", onScroll, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12256,
          "text": "window.addEventListener('auth:ok',upd)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12257,
          "text": "window.addEventListener('auth:success',upd)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12357,
          "text": "document.addEventListener('pointerdown', onDown, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12358,
          "text": "document.addEventListener('keydown', onKey, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12359,
          "text": "window.addEventListener('scroll', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12360,
          "text": "window.addEventListener('resize', onScroll, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12521,
          "text": "document.addEventListener('play', handlePlay, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12522,
          "text": "window.addEventListener('site-media-play', onSiteMediaPlay);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 12676,
          "text": "el.addEventListener('volumechange', h, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13096,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13238,
          "text": "window.addEventListener('qcoin:open', open)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13246,
          "text": "window.addEventListener('vip:open', openVip)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13297,
          "text": "window.addEventListener('forum:edit', onEdit);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13710,
          "text": "['click','keydown'].forEach(e => el.addEventListener(e, mark, { passive:true }));",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13718,
          "text": "document.addEventListener('visibilitychange', upd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13719,
          "text": "window.addEventListener('focus', upd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 13720,
          "text": "window.addEventListener('blur',  upd);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14183,
          "text": "window.addEventListener('storage', onStorage)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14227,
          "text": "window.addEventListener('storage', onStorage);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 14627,
          "text": "window.addEventListener('scroll', onScroll, opts);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 15513,
          "text": "window.addEventListener('forum:head-hide-once', onHeadHideOnce);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 15514,
          "text": "window.addEventListener('inbox:open-dm', onOpenDm);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16575,
          "text": "document.addEventListener('pointerdown', onDown, true);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16586,
          "text": "sendBtn.addEventListener('click', onClick);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 16872,
          "text": "video.addEventListener('loadedmetadata', onMeta);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 17312,
          "text": "video.addEventListener('loadedmetadata', done, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 17366,
          "text": "video.addEventListener('seeked', onSeeked, { once: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 19682,
          "text": "window.addEventListener('scroll', onScroll, opts);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 19683,
          "text": "window.addEventListener('resize', onScroll, opts);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 19830,
          "text": "window.addEventListener('scroll', onScroll, { passive: true });",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 23402,
          "text": "window.addEventListener('keydown', onKeyDown)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 442,
          "text": "window.removeEventListener('auth:ok', ok);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 443,
          "text": "window.removeEventListener('auth:success', ok);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 444,
          "text": "window.removeEventListener('auth:cancel', cancel);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 445,
          "text": "window.removeEventListener('auth:fail', cancel);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1441,
          "text": "document.removeEventListener('play', onPlay, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1442,
          "text": "document.removeEventListener('pause', onStop, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1443,
          "text": "document.removeEventListener('ended', onStop, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1552,
          "text": "root.removeEventListener(e, onAny);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1554,
          "text": "document.removeEventListener('visibilitychange', onVis);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1555,
          "text": "window.removeEventListener('focus', onAny);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 7336,
          "text": "document.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 7337,
          "text": "document.removeEventListener('pointerdown', onClick);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 7797,
          "text": "window.removeEventListener('scroll', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 7798,
          "text": "window.removeEventListener('resize', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 7821,
          "text": "document.removeEventListener('pointerdown', onDown, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 7822,
          "text": "document.removeEventListener('keydown', onKey, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8247,
          "text": "window.removeEventListener('resize', applySize);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8898,
          "text": "return () => window.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 8988,
          "text": "return () => window.removeEventListener('keydown', onKey);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 10464,
          "text": "v.removeEventListener('play', onPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 10465,
          "text": "v.removeEventListener('pause', onPause);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 10466,
          "text": "v.removeEventListener('ended', onEnd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11055,
          "text": "window.removeEventListener('wheel', prevent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11056,
          "text": "window.removeEventListener('touchmove', prevent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11272,
          "text": "try { el.removeEventListener('volumechange', onVol); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11273,
          "text": "window.removeEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11429,
          "text": "audio.removeEventListener('loadedmetadata', onMeta);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11430,
          "text": "audio.removeEventListener('durationchange', onMeta);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11431,
          "text": "audio.removeEventListener('timeupdate', onTime);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11432,
          "text": "audio.removeEventListener('play', onPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11433,
          "text": "audio.removeEventListener('pause', onPause);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11434,
          "text": "audio.removeEventListener('volumechange', onVolume);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11435,
          "text": "window.removeEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11692,
          "text": "a.removeEventListener('loadedmetadata', onLoaded);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11693,
          "text": "a.removeEventListener('play', onPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11694,
          "text": "a.removeEventListener('pause', onPause);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 11695,
          "text": "a.removeEventListener('ended', onEnded);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12171,
          "text": "try { window.removeEventListener(\"error\", onErr); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12172,
          "text": "try { window.removeEventListener(\"unhandledrejection\", onRej); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12173,
          "text": "try { document.removeEventListener(\"visibilitychange\", onVis); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12174,
          "text": "try { window.removeEventListener(\"pagehide\", onHide); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12175,
          "text": "try { window.removeEventListener(\"beforeunload\", onBeforeUnload); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12176,
          "text": "try { window.removeEventListener(\"scroll\", onScroll); } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12259,
          "text": "return ()=>{ window.removeEventListener('auth:ok',upd); window.removeEventListener('auth:success',upd); clearInterval(id) }",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12362,
          "text": "document.removeEventListener('pointerdown', onDown, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12363,
          "text": "document.removeEventListener('keydown', onKey, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12364,
          "text": "window.removeEventListener('scroll', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12365,
          "text": "window.removeEventListener('resize', onScroll, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12524,
          "text": "document.removeEventListener('play', handlePlay, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 12525,
          "text": "window.removeEventListener('site-media-play', onSiteMediaPlay);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13099,
          "text": "window.removeEventListener(MEDIA_MUTED_EVENT, onMutedEvent);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13118,
          "text": "if (h) el.removeEventListener('volumechange', h);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13239,
          "text": "return ()=> window.removeEventListener('qcoin:open', open)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13247,
          "text": "return () => window.removeEventListener('vip:open', openVip)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13298,
          "text": "return () => window.removeEventListener('forum:edit', onEdit);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13711,
          "text": "return ()=> ['click','keydown'].forEach(e => el.removeEventListener(e, mark));",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13722,
          "text": "document.removeEventListener('visibilitychange', upd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13723,
          "text": "window.removeEventListener('focus', upd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 13724,
          "text": "window.removeEventListener('blur',  upd);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14184,
          "text": "return () => window.removeEventListener('storage', onStorage)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14228,
          "text": "return () => window.removeEventListener('storage', onStorage);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 14634,
          "text": "window.removeEventListener('scroll', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 15516,
          "text": "window.removeEventListener('forum:head-hide-once', onHeadHideOnce);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 15517,
          "text": "window.removeEventListener('inbox:open-dm', onOpenDm);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16576,
          "text": "return () => document.removeEventListener('pointerdown', onDown, true);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16587,
          "text": "return () => sendBtn.removeEventListener('click', onClick);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 16869,
          "text": "video.removeEventListener('loadedmetadata', onMeta);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 19690,
          "text": "window.removeEventListener('scroll', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 19691,
          "text": "window.removeEventListener('resize', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 19831,
          "text": "return () => window.removeEventListener('scroll', onScroll);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 23403,
          "text": "return () => window.removeEventListener('keydown', onKeyDown)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 184,
          "text": "// Иначе оно улетает в ветку video и рендерится нативным <video controls> (чёрный экран).",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 2581,
          "text": "/* 2) Обычные <img>/<video>/<canvas>/<svg> внутри — растянуть и покрыть */",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 7371,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 9962,
          "text": "{/* видео: отдельные карточки с <video>, но с безопасным lifecycle (очистка буфера вдали от viewport) */}",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 10358,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 10733,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 11111,
          "text": "//  - unload <video> src when далеко от viewport (чистим декодер/буфер)",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 11205,
          "text": "* VideoMedia — безопасный <video> для ленты/постов/DM:",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 11349,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 11896,
          "text": "// Native <video> controls: ONLY after user interaction (tap/click)",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 12443,
          "text": "// В любой момент времени играет только один <video>/<audio> controls.",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 22726,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 23171,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 23262,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<audio",
          "line": 11500,
          "text": "// делаем ВИДИМЫЙ контейнер объектом автоплея (а не <audio>, который может быть 0x0)",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 11507,
          "text": "<audio",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 11871,
          "text": "<audio ref={audioRef} src={src} preload=\"metadata\" />",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 12443,
          "text": "// В любой момент времени играет только один <video>/<audio> controls.",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<audio",
          "line": 13057,
          "text": "// Q-Cast: mute/unmute берём с вложенного <audio>",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<img",
          "line": 730,
          "text": "// строго детерминированный URL и только <img>",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 774,
          "text": "* — После mount, если icon — картинка, показываем <img> внутри того же <div>",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 2581,
          "text": "/* 2) Обычные <img>/<video>/<canvas>/<svg> внутри — растянуть и покрыть */",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 8042,
          "text": "// WHY: <img> + object-fit:cover обрезает картинку в квадрат сразу после выбора.",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 8698,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 8707,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 10718,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 20189,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 21719,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 7374,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 10017,
          "text": "allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 10096,
          "text": "allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 10360,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11219,
          "text": "autoPlay,",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11243,
          "text": ": !!autoPlay; // если преф не задан — для autoplay безопаснее стартовать muted",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11275,
          "text": "}, [autoPlay]);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 11355,
          "text": "autoPlay={autoPlay}",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 12612,
          "text": "// === Shorts-like autoplay: play when in focus, pause when out ===",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 16855,
          "text": "video.autoplay = true;",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 23171,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 23262,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 7376,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 11220,
          "text": "loop,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 11356,
          "text": "loop={loop}",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12758,
          "text": "// LOOP: когда ролик закончился — стартуем заново без reload iframe",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12868,
          "text": "// Best-effort loop для iframe (Vimeo/встроенные плееры/прочее):",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12869,
          "text": "// добавляем loop=1 ОДИН РАЗ (не на каждом фокусе), чтобы не было дергания.",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12873,
          "text": "if (!u.searchParams.has('loop')) u.searchParams.set('loop', '1');",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12888,
          "text": "// LOOP: автоплей всегда зацикленный",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12889,
          "text": "el.loop = true;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12904,
          "text": "// LOOP: qcast-аудио тоже зацикливаем",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12905,
          "text": "a.loop = true;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12941,
          "text": "// сохраняем уже \"loop-версию\" в data-src, чтобы дальше не мутить url повторно",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13901,
          "text": "// === Incremental sync loop: 2m flush + snapshot ===",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16899,
          "text": "const loop = () => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16904,
          "text": "rafId = requestAnimationFrame(loop);",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16906,
          "text": "loop();",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 23171,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 23262,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 1386,
          "text": "warmed.preload = slow ? 'metadata' : 'auto';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 1416,
          "text": "warmed.preload = slow ? 'metadata' : 'auto';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 7378,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 9972,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11112,
          "text": "//  - restore src when viewport приближается (быстрый старт сохраняем через preload=metadata)",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11189,
          "text": "try { el.preload = 'none'; } catch {}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11199,
          "text": "try { el.preload = 'metadata'; } catch {}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11214,
          "text": "preload = 'metadata',",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11353,
          "text": "preload={preload}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11510,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 11871,
          "text": "<audio ref={audioRef} src={src} preload=\"metadata\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 12557,
          "text": "video.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 17305,
          "text": "video.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 18070,
          "text": "v.preload = 'metadata';",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 21271,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 22730,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 23171,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 23262,
          "text": "? <video className=\"questThumb\" src={q.cover} playsInline autoPlay muted loop preload=\"metadata\" />",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "loading=lazy",
          "line": 9454,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 9953,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 10015,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 10094,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 20184,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 20192,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 21237,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 21255,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 21714,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 21722,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 22704,
          "text": "<Image src={u} alt=\"\" loading=\"lazy\" unoptimized width={600} height={600}",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 23172,
          "text": ": <Image className=\"questThumb\" src={q.cover} alt=\"\" loading=\"lazy\" unoptimized width={60} height={60} />",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 23263,
          "text": ": <Image className=\"questThumb\" src={q.cover} alt=\"\" loading=\"lazy\" unoptimized width={60} height={60} />",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "createObjectURL",
          "line": 8293,
          "text": "const url = URL.createObjectURL(f);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 16801,
          "text": "const url  = URL.createObjectURL(blob);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 17021,
          "text": "const url = URL.createObjectURL(blob);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 17300,
          "text": ": URL.createObjectURL(videoSource);",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "revokeObjectURL",
          "line": 8155,
          "text": "URL.revokeObjectURL(url);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17026,
          "text": "if (prev && /^blob:/.test(prev)) URL.revokeObjectURL(prev);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17089,
          "text": "try { URL.revokeObjectURL(pendingVideo) } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17122,
          "text": "if (pendingAudio && /^blob:/.test(pendingAudio)) URL.revokeObjectURL(pendingAudio);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17404,
          "text": "try { URL.revokeObjectURL(url); } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17788,
          "text": "try { if (pendingAudio && /^blob:/.test(pendingAudio)) URL.revokeObjectURL(pendingAudio) } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17803,
          "text": "if (pendingVideo && /^blob:/.test(pendingVideo)) URL.revokeObjectURL(pendingVideo);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17925,
          "text": "try { if (pendingAudio && /^blob:/.test(pendingAudio)) URL.revokeObjectURL(pendingAudio) } catch {}",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 17942,
          "text": "if (pendingVideo && /^blob:/.test(pendingVideo)) URL.revokeObjectURL(pendingVideo);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 22792,
          "text": "URL.revokeObjectURL(pendingVideo);",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "onScroll",
          "line": 7793,
          "text": "const onScroll = () => schedulePositionUpdate()",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 12160,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 12356,
          "text": "const onScroll = () => syncReportAnchorRect()",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 14563,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 19670,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "onScroll",
          "line": 19829,
          "text": "const onScroll = () => { lastUserScrollTsRef.current = Date.now(); };",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "touchmove",
          "line": 11052,
          "text": "window.addEventListener('touchmove', prevent, { passive: false });",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "touchmove",
          "line": 11056,
          "text": "window.removeEventListener('touchmove', prevent);",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 11051,
          "text": "window.addEventListener('wheel', prevent, { passive: false });",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 11055,
          "text": "window.removeEventListener('wheel', prevent);",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\tools\\audit-heavy.js",
      "counts": {
        "clearInterval": 1,
        "getBoundingClientRect": 1,
        "removeEventListener": 1,
        "<video": 6,
        "<audio": 1,
        "<img": 2,
        "autoplay": 6,
        "loop": 2,
        "preload": 1,
        "touchmove": 1,
        "wheel": 1
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "clearInterval",
          "line": 92,
          "text": "if ((counts.setInterval || 0) > (counts.clearInterval || 0)) flags.push(\"⚠ setInterval > clearInterval (возможная утечка)\");",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "getBoundingClientRect",
          "line": 94,
          "text": "if ((counts.getBoundingClientRect || 0) >= 10) flags.push(\"⚠ много getBoundingClientRect (дорого, особенно в scroll/raf)\");",
          "why": "Очень дорого в скролле/таче/raf"
        },
        {
          "key": "removeEventListener",
          "line": 91,
          "text": "if ((counts.addEventListener || 0) > (counts.removeEventListener || 0)) flags.push(\"⚠ addEventListener > removeEventListener (возможная утечка)\");",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 35,
          "text": "{ key: \"<video\", rx: /<video\\b/gi, why: \"Видео = память+декодер+GPU\" },",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 95,
          "text": "if ((counts.autoplay || 0) >= 1 && (counts[\"<video\"] || 0) >= 1) flags.push(\"⚠ autoplay видео (может грузить/GPU/память)\");",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 108,
          "text": "+ (a.counts[\"<video\"] || 0) * 6",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 113,
          "text": "+ (b.counts[\"<video\"] || 0) * 6",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 126,
          "text": "(c[\"<video\"] || 0) * 6 +",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 133,
          "text": "console.log(`  score=${score}  rect=${c.getBoundingClientRect || 0}  video=${c[\"<video\"] || 0}  autoplay=${c.autoplay || 0}  interval=${c.setInterval || 0}  raf=${c.requestAnimationFrame || 0}`);",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<audio",
          "line": 36,
          "text": "{ key: \"<audio\", rx: /<audio\\b/gi, why: \"Аудио = доп ресурсы\" },",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "<img",
          "line": 37,
          "text": "{ key: \"<img\", rx: /<img\\b/gi, why: \"Картинки без lazy часто убивают память\" },",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 96,
          "text": "if ((counts[\"<img\"] || 0) >= 5 && (counts[\"loading=lazy\"] || 0) === 0) flags.push(\"⚠ много img без loading=lazy\");",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 38,
          "text": "{ key: \"autoplay\", rx: /\\bautoPlay\\b|autoplay\\s*=/gi, why: \"Autoplay/loop → постоянная нагрузка\" },",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 95,
          "text": "if ((counts.autoplay || 0) >= 1 && (counts[\"<video\"] || 0) >= 1) flags.push(\"⚠ autoplay видео (может грузить/GPU/память)\");",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 109,
          "text": "+ (a.counts.autoplay || 0) * 6",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 114,
          "text": "+ (b.counts.autoplay || 0) * 6",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 127,
          "text": "(c.autoplay || 0) * 6 +",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 133,
          "text": "console.log(`  score=${score}  rect=${c.getBoundingClientRect || 0}  video=${c[\"<video\"] || 0}  autoplay=${c.autoplay || 0}  interval=${c.setInterval || 0}  raf=${c.requestAnimationFrame || 0}`);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 38,
          "text": "{ key: \"autoplay\", rx: /\\bautoPlay\\b|autoplay\\s*=/gi, why: \"Autoplay/loop → постоянная нагрузка\" },",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39,
          "text": "{ key: \"loop\", rx: /\\bloop\\b/gi, why: \"Loop особенно опасен на множестве карточек\" },",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 40,
          "text": "{ key: \"preload\", rx: /\\bpreload\\s*=/gi, why: \"preload=auto/metadata может забивать сеть/память\" },",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "touchmove",
          "line": 53,
          "text": "{ key: \"touchmove\", rx: /\\btouchmove\\b/gi, why: \"Touchmove легко сломать/перегрузить\" },",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 54,
          "text": "{ key: \"wheel\", rx: /\\bwheel\\b/gi, why: \"Wheel обработчики могут грузить\" },",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\tools\\audit-media.js",
      "counts": {
        "<video": 1,
        "<img": 1,
        "autoplay": 8,
        "loop": 7,
        "preload": 2
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "<video",
          "line": 43,
          "text": "const video = findLines(t, /<video\\b/i);",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 48,
          "text": "const img = findLines(t, /<img\\b/i);",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 44,
          "text": "const autoplay = findLines(t, /\\bautoPlay\\b|autoplay\\s*=/i);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 54,
          "text": "if (video.length || autoplay.length || loop.length || preload.length || img.length || create.length) {",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 56,
          "text": "if (video.length && autoplay.length) flags.push(\"⚠ video + autoplay\");",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 64,
          "text": "counts: { video: video.length, autoplay: autoplay.length, loop: loop.length, preload: preload.length, img: img.length, lazy: lazy.length, create: create.length, revoke: revoke.length },",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 68,
          "text": "autoplay: autoplay.slice(0, 3),",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 77,
          "text": "const sa = a.counts.video * 6 + a.counts.autoplay * 6 + a.counts.loop * 4 + a.counts.preload * 3 + a.counts.img + (a.counts.create - a.counts.revoke) * 10;",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 78,
          "text": "const sb = b.counts.video * 6 + b.counts.autoplay * 6 + b.counts.loop * 4 + b.counts.preload * 3 + b.counts.img + (b.counts.create - b.counts.revoke) * 10;",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 85,
          "text": "console.log(`  video=${r.counts.video} autoplay=${r.counts.autoplay} loop=${r.counts.loop} preload=${r.counts.preload} img=${r.counts.img} lazy=${r.counts.lazy} create=${r.counts.create} revoke=${r.counts.revoke}`);",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 45,
          "text": "const loop = findLines(t, /\\bloop\\b/i);",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 54,
          "text": "if (video.length || autoplay.length || loop.length || preload.length || img.length || create.length) {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 57,
          "text": "if (video.length && loop.length) flags.push(\"⚠ video + loop\");",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 64,
          "text": "counts: { video: video.length, autoplay: autoplay.length, loop: loop.length, preload: preload.length, img: img.length, lazy: lazy.length, create: create.length, revoke: revoke.length },",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 77,
          "text": "const sa = a.counts.video * 6 + a.counts.autoplay * 6 + a.counts.loop * 4 + a.counts.preload * 3 + a.counts.img + (a.counts.create - a.counts.revoke) * 10;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 78,
          "text": "const sb = b.counts.video * 6 + b.counts.autoplay * 6 + b.counts.loop * 4 + b.counts.preload * 3 + b.counts.img + (b.counts.create - b.counts.revoke) * 10;",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 85,
          "text": "console.log(`  video=${r.counts.video} autoplay=${r.counts.autoplay} loop=${r.counts.loop} preload=${r.counts.preload} img=${r.counts.img} lazy=${r.counts.lazy} create=${r.counts.create} revoke=${r.counts.revoke}`);",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 46,
          "text": "const preload = findLines(t, /\\bpreload\\s*=/i);",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "preload",
          "line": 85,
          "text": "console.log(`  video=${r.counts.video} autoplay=${r.counts.autoplay} loop=${r.counts.loop} preload=${r.counts.preload} img=${r.counts.img} lazy=${r.counts.lazy} create=${r.counts.create} revoke=${r.counts.revoke}`);",
          "why": "preload=auto/metadata может забивать сеть/память"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\ForumAds.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 3,
        "addEventListener": 4,
        "removeEventListener": 4,
        "<video": 1,
        "<img": 1,
        "autoplay": 4,
        "loop": 2,
        "preload": 1,
        "loading=lazy": 1,
        "decoding=async": 1
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 982,
          "text": "const timer = setInterval(pickNext, rotateMs);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 985,
          "text": "clearInterval(timer);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 713,
          "text": "const timer = setTimeout(() => finish(false), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 723,
          "text": "const timer = setTimeout(() => controller.abort(), timeoutMs);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1347,
          "text": "timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 846,
          "text": "document.addEventListener('visibilitychange', sync);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 847,
          "text": "window.addEventListener('focus', sync);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 848,
          "text": "window.addEventListener('blur', sync);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 912,
          "text": "window.addEventListener(MEDIA_MUTED_EVENT, onMuted);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 851,
          "text": "document.removeEventListener('visibilitychange', sync);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 852,
          "text": "window.removeEventListener('focus', sync);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 853,
          "text": "window.removeEventListener('blur', sync);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 913,
          "text": "return () => window.removeEventListener(MEDIA_MUTED_EVENT, onMuted);",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 1582,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 1654,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 1237,
          "text": "autoplay: 0,",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 1301,
          "text": "emitMutedPref(true, playerIdRef.current, 'forum-ads-autoplay-fallback');",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 1606,
          "text": "allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 1630,
          "text": "allow=\"autoplay; encrypted-media; fullscreen; picture-in-picture\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 1244,
          "text": "loop: 1,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 1587,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 1589,
          "text": "preload={isNear ? 'metadata' : 'none'}",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "loading=lazy",
          "line": 1658,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "decoding=async",
          "line": 1659,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\ads\\home.js",
      "counts": {
        "addEventListener": 1,
        "removeEventListener": 1,
        "<video": 2,
        "<img": 2,
        "autoplay": 2,
        "loop": 2,
        "preload": 1,
        "createObjectURL": 3,
        "revokeObjectURL": 2,
        "onScroll": 1
      },
      "flags": [
        "⚠ createObjectURL > revokeObjectURL (возможная утечка)",
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "addEventListener",
          "line": 1826,
          "text": "window.addEventListener('resize', check)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 1827,
          "text": "return () => window.removeEventListener('resize', check)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 2565,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<video",
          "line": 3037,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 2574,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 3052,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 2568,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 3039,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 2570,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 3041,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 116,
          "text": "v.preload = 'metadata'",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "createObjectURL",
          "line": 114,
          "text": "const url = URL.createObjectURL(file)",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 2131,
          "text": "url = URL.createObjectURL(file)",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "createObjectURL",
          "line": 2153,
          "text": "url = URL.createObjectURL(file)",
          "why": "Если без revoke → утечки памяти"
        },
        {
          "key": "revokeObjectURL",
          "line": 120,
          "text": "URL.revokeObjectURL(url)",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "revokeObjectURL",
          "line": 132,
          "text": "URL.revokeObjectURL(url)",
          "why": "Проверяем парность create/revoke"
        },
        {
          "key": "onScroll",
          "line": 2189,
          "text": "onScroll={handleRulesScroll}",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\about\\page.js",
      "counts": {
        "querySelectorAll": 1,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<video": 1,
        "<img": 3,
        "autoplay": 1,
        "loop": 3,
        "preload": 1,
        "loading=lazy": 1
      },
      "flags": [
        "⚠ autoplay видео (может грузить/GPU/память)"
      ],
      "hits": [
        {
          "key": "querySelectorAll",
          "line": 126,
          "text": "const imgs = root.querySelectorAll('img[data-anim=\"1\"]')",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "addEventListener",
          "line": 162,
          "text": "img.addEventListener('mouseenter', onEnter)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 169,
          "text": "try { floatAnim.cancel(); glowAnim.cancel(); img.removeEventListener('mouseenter', onEnter) } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<video",
          "line": 182,
          "text": "<video",
          "why": "Видео = память+декодер+GPU"
        },
        {
          "key": "<img",
          "line": 208,
          "text": "<img src={img.src} alt={img.alt} loading=\"lazy\" />",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 298,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 312,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 185,
          "text": "autoPlay",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loop",
          "line": 59,
          "text": "'/branding/about-loop.mp4',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 60,
          "text": "'/about-loop.mp4',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 187,
          "text": "loop",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "preload",
          "line": 188,
          "text": "preload=\"metadata\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "loading=lazy",
          "line": 208,
          "text": "<img src={img.src} alt={img.alt} loading=\"lazy\" />",
          "why": "Ищем где НЕ lazy"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\BgAudio.js",
      "counts": {
        "addEventListener": 8,
        "removeEventListener": 8,
        "<audio": 1,
        "autoplay": 2,
        "preload": 1,
        "touchmove": 2,
        "wheel": 3
      },
      "flags": [],
      "hits": [
        {
          "key": "addEventListener",
          "line": 101,
          "text": "window.addEventListener('pointerdown', onGesture, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 102,
          "text": "window.addEventListener('click', onGesture, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 103,
          "text": "window.addEventListener('keydown', onGesture, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 104,
          "text": "window.addEventListener('wheel', onGesture, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 105,
          "text": "window.addEventListener('touchstart', onGesture, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 106,
          "text": "window.addEventListener('touchmove', onGesture, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 151,
          "text": "window.addEventListener('site-media-play', onMediaPlay)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 152,
          "text": "document.addEventListener('play', onAnyPlay, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 112,
          "text": "window.removeEventListener('pointerdown', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 113,
          "text": "window.removeEventListener('click', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 114,
          "text": "window.removeEventListener('keydown', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 115,
          "text": "window.removeEventListener('wheel', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 116,
          "text": "window.removeEventListener('touchstart', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 117,
          "text": "window.removeEventListener('touchmove', onGesture, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 155,
          "text": "window.removeEventListener('site-media-play', onMediaPlay)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 156,
          "text": "document.removeEventListener('play', onAnyPlay, true)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<audio",
          "line": 199,
          "text": "<audio",
          "why": "Аудио = доп ресурсы"
        },
        {
          "key": "autoplay",
          "line": 14,
          "text": "const [locked, setLocked] = useState(true) // браузер запретил autoplay со звуком",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "autoplay",
          "line": 53,
          "text": "// autoplay со звуком запрещён → играем тихо",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "preload",
          "line": 202,
          "text": "preload=\"auto\"",
          "why": "preload=auto/metadata может забивать сеть/память"
        },
        {
          "key": "touchmove",
          "line": 106,
          "text": "window.addEventListener('touchmove', onGesture, { passive: true, capture: true })",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "touchmove",
          "line": 117,
          "text": "window.removeEventListener('touchmove', onGesture, true)",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 104,
          "text": "window.addEventListener('wheel', onGesture, { passive: true, capture: true })",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 115,
          "text": "window.removeEventListener('wheel', onGesture, true)",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 213,
          "text": "? `Sound on • ${Math.round(vol * 100)}% (wheel to change)`",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\exchange\\page.js",
      "counts": {
        "setInterval": 4,
        "clearInterval": 5,
        "setTimeout": 3,
        "addEventListener": 9,
        "removeEventListener": 6
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 1469,
          "text": "tickerRef.current = setInterval(async () => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 1572,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 1590,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 1687,
          "text": "const id = setInterval(load, 3000)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 1463,
          "text": "if (tickerRef.current) { clearInterval(tickerRef.current); tickerRef.current = null }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1511,
          "text": "if (tickerRef.current) { clearInterval(tickerRef.current); tickerRef.current = null }",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1584,
          "text": "clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1597,
          "text": "return () => clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 1691,
          "text": "clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 412,
          "text": "const tick=()=>{ if (window.TradingView) cb(); else setTimeout(tick,40) }",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 709,
          "text": "setTimeout(tick, speed)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 1023,
          "text": "setTimeout(()=> resolve(getAcc()), 120000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 1021,
          "text": "window.addEventListener('auth:ok', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1022,
          "text": "window.addEventListener('auth:success', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1578,
          "text": "window.addEventListener('pagehide', onHide)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1579,
          "text": "document.addEventListener('visibilitychange', () => {",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1611,
          "text": "window.addEventListener('vip:refresh', onRefresh)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1612,
          "text": "window.addEventListener('focus', onFocus)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1613,
          "text": "document.addEventListener('visibilitychange', onVis)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 1614,
          "text": "window.addEventListener('auth:ok', onRefresh)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 2134,
          "text": "window.addEventListener('open-unlimit', open)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 1585,
          "text": "window.removeEventListener('pagehide', onHide)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1616,
          "text": "window.removeEventListener('vip:refresh', onRefresh)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1617,
          "text": "window.removeEventListener('focus', onFocus)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1618,
          "text": "document.removeEventListener('visibilitychange', onVis)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 1619,
          "text": "window.removeEventListener('auth:ok', onRefresh)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 2135,
          "text": "return () => window.removeEventListener('open-unlimit', open)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\page.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 3,
        "setTimeout": 2,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<img": 1,
        "autoplay": 1,
        "loading=lazy": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 157,
          "text": "const tmr = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 162,
          "text": "clearInterval(tmr)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 164,
          "text": "if (tries > 25) clearInterval(tmr) // ~2.5 сек",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 169,
          "text": "clearInterval(tmr)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 30,
          "text": "const t = setTimeout(() => controller.abort(), 3000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 41,
          "text": "const t = setTimeout(() => controller.abort(), 3000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 147,
          "text": "window.addEventListener('tg:link-status', onStatus)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 168,
          "text": "window.removeEventListener('tg:link-status', onStatus)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 266,
          "text": "{/* ← заменено <img> на <Image/> в двух иконках */}",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "autoplay",
          "line": 101,
          "text": "allow=\"autoplay; encrypted-media; picture-in-picture\"",
          "why": "Autoplay/loop → постоянная нагрузка"
        },
        {
          "key": "loading=lazy",
          "line": 88,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "loading=lazy",
          "line": 103,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\ScrollTopPulse.js",
      "counts": {
        "setTimeout": 4,
        "requestAnimationFrame": 3,
        "cancelAnimationFrame": 2,
        "addEventListener": 7,
        "removeEventListener": 7,
        "loop": 1,
        "onScroll": 1,
        "touchmove": 2,
        "wheel": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 27,
          "text": "spinTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 131,
          "text": "hideTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 188,
          "text": "appearTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 211,
          "text": "appearTimerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "requestAnimationFrame",
          "line": 279,
          "text": "rafRef.current = requestAnimationFrame(step)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 325,
          "text": "rafRef.current = requestAnimationFrame(step)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 328,
          "text": "rafRef.current = requestAnimationFrame(step)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 71,
          "text": "cancelAnimationFrame(rafRef.current)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 341,
          "text": "cancelAnimationFrame(rafRef.current)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 84,
          "text": "window.addEventListener('wheel', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 85,
          "text": "window.addEventListener('touchstart', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 86,
          "text": "window.addEventListener('touchmove', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 87,
          "text": "window.addEventListener('pointerdown', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 88,
          "text": "window.addEventListener('mousedown', cancelScroll, { passive: true, capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 89,
          "text": "window.addEventListener('keydown', cancelScroll, { capture: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 227,
          "text": "window.addEventListener('scroll', onScroll, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 52,
          "text": "window.removeEventListener('wheel', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 53,
          "text": "window.removeEventListener('touchstart', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 54,
          "text": "window.removeEventListener('touchmove', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 55,
          "text": "window.removeEventListener('pointerdown', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 56,
          "text": "window.removeEventListener('mousedown', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 57,
          "text": "window.removeEventListener('keydown', cancelScroll, { capture: true })",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 230,
          "text": "window.removeEventListener('scroll', onScroll)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "loop",
          "line": 266,
          "text": "// Не \"подпрыгиваем\" от чтения window.scrollY каждый кадр (feedback loop),",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "onScroll",
          "line": 136,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        },
        {
          "key": "touchmove",
          "line": 54,
          "text": "window.removeEventListener('touchmove', cancelScroll, { capture: true })",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "touchmove",
          "line": 86,
          "text": "window.addEventListener('touchmove', cancelScroll, { passive: true, capture: true })",
          "why": "Touchmove легко сломать/перегрузить"
        },
        {
          "key": "wheel",
          "line": 52,
          "text": "window.removeEventListener('wheel', cancelScroll, { capture: true })",
          "why": "Wheel обработчики могут грузить"
        },
        {
          "key": "wheel",
          "line": 84,
          "text": "window.addEventListener('wheel', cancelScroll, { passive: true, capture: true })",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\SnowFX.jsx",
      "counts": {
        "requestAnimationFrame": 3,
        "cancelAnimationFrame": 1,
        "addEventListener": 3,
        "removeEventListener": 3,
        "loop": 4,
        "onScroll": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "requestAnimationFrame",
          "line": 235,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 302,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 305,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 311,
          "text": "if (rafId) cancelAnimationFrame(rafId)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 201,
          "text": "window.addEventListener('resize', onResize)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 364,
          "text": "window.addEventListener('pointerdown', onPointerDown, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 423,
          "text": "window.addEventListener('scroll', onScroll, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 202,
          "text": "return () => window.removeEventListener('resize', onResize)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 365,
          "text": "return () => window.removeEventListener('pointerdown', onPointerDown)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 424,
          "text": "return () => window.removeEventListener('scroll', onScroll)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "loop",
          "line": 217,
          "text": "const loop = (ts) => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 235,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 302,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 305,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "onScroll",
          "line": 375,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\exchange\\BattleCoin.jsx",
      "counts": {
        "setInterval": 2,
        "clearInterval": 2,
        "setTimeout": 2,
        "addEventListener": 4,
        "removeEventListener": 4
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 228,
          "text": "const id = setInterval(() => setNowTs(Date.now()), 1000)",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "setInterval",
          "line": 328,
          "text": "const id = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 229,
          "text": "return () => clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 332,
          "text": "return () => clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 61,
          "text": "const timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 412,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 100,
          "text": "window.addEventListener('auth:ok', onAuthOk)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 101,
          "text": "window.addEventListener('auth:logout', onLogout)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 317,
          "text": "window.addEventListener('auth:ok', onAuthOk)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 318,
          "text": "window.addEventListener('auth:logout', onLogout)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 93,
          "text": "window.removeEventListener('auth:ok', onAuthOk)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 96,
          "text": "window.removeEventListener('auth:logout', onLogout)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 322,
          "text": "try { window.removeEventListener('auth:ok', onAuthOk) } catch {}",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 323,
          "text": "try { window.removeEventListener('auth:logout', onLogout) } catch {}",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\QCoinDropFX.jsx",
      "counts": {
        "setTimeout": 2,
        "requestAnimationFrame": 2,
        "cancelAnimationFrame": 1,
        "addEventListener": 5,
        "removeEventListener": 5,
        "loop": 3,
        "onScroll": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 400,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 406,
          "text": "setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "requestAnimationFrame",
          "line": 243,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "requestAnimationFrame",
          "line": 246,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 252,
          "text": "if (rafId) cancelAnimationFrame(rafId)",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 105,
          "text": "window.addEventListener('auth:ok', onAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 106,
          "text": "window.addEventListener('auth:success', onAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 129,
          "text": "window.addEventListener('resize', onResize)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 300,
          "text": "window.addEventListener('pointerdown', onPointerDown, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 345,
          "text": "window.addEventListener('scroll', onScroll, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 119,
          "text": "window.removeEventListener('auth:ok', onAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 120,
          "text": "window.removeEventListener('auth:success', onAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 130,
          "text": "return () => window.removeEventListener('resize', onResize)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 301,
          "text": "return () => window.removeEventListener('pointerdown', onPointerDown)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 346,
          "text": "return () => window.removeEventListener('scroll', onScroll)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "loop",
          "line": 141,
          "text": "const loop = (ts) => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 243,
          "text": "if (!stopped) animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 246,
          "text": "animFrameRef.current = requestAnimationFrame(loop)",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "onScroll",
          "line": 311,
          "text": "const onScroll = () => {",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\tools\\audit-effects.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "requestAnimationFrame": 1,
        "cancelAnimationFrame": 1,
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 71,
          "text": "if (si > ci) flags.push(`⚠ setInterval(${si}) > clearInterval(${ci})`);",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 71,
          "text": "if (si > ci) flags.push(`⚠ setInterval(${si}) > clearInterval(${ci})`);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "requestAnimationFrame",
          "line": 72,
          "text": "if (raf > caf) flags.push(`⚠ requestAnimationFrame(${raf}) > cancelAnimationFrame(${caf})`);",
          "why": "RAF-циклы часто грузят main-thread"
        },
        {
          "key": "cancelAnimationFrame",
          "line": 72,
          "text": "if (raf > caf) flags.push(`⚠ requestAnimationFrame(${raf}) > cancelAnimationFrame(${caf})`);",
          "why": "Проверяем парность с RAF"
        },
        {
          "key": "addEventListener",
          "line": 70,
          "text": "if (add > rem) flags.push(`⚠ addEventListener(${add}) > removeEventListener(${rem})`);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 70,
          "text": "if (add > rem) flags.push(`⚠ addEventListener(${add}) > removeEventListener(${rem})`);",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\academy\\AcademyExamBlock.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 3,
        "addEventListener": 4,
        "removeEventListener": 2
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 483,
          "text": "const id = setInterval(function () {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 487,
          "text": "clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 99,
          "text": "setTimeout(function () {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 733,
          "text": "setTimeout(async function () {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 813,
          "text": "setTimeout(function () {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 96,
          "text": "window.addEventListener('auth:ok', done, { once: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 97,
          "text": "window.addEventListener('auth:success', done, { once: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 607,
          "text": "window.addEventListener('auth:ok', handleAuthEvent)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 608,
          "text": "window.addEventListener('auth:success', handleAuthEvent)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 611,
          "text": "window.removeEventListener('auth:ok', handleAuthEvent)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 612,
          "text": "window.removeEventListener('auth:success', handleAuthEvent)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\api\\forum\\events\\stream\\route.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 2,
        "addEventListener": 1,
        "loop": 2
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 121,
          "text": "const hb = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 126,
          "text": "clearInterval(hb)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 80,
          "text": "await new Promise((r) => setTimeout(r, waitMs))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 87,
          "text": "await new Promise((r) => setTimeout(r, waitMs))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 135,
          "text": "else signal.addEventListener('abort', close, { once: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "loop",
          "line": 57,
          "text": "const loop = async () => {",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 94,
          "text": "loop().finally(() => { S.subRunning = false })",
          "why": "Loop особенно опасен на множестве карточек"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\components\\CryptoNewsLens.jsx",
      "counts": {
        "setInterval": 1,
        "clearInterval": 4,
        "setTimeout": 1,
        "addEventListener": 2,
        "removeEventListener": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 779,
          "text": "progressTimerRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 772,
          "text": "if (progressTimerRef.current) clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 785,
          "text": "clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 805,
          "text": "clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "clearInterval",
          "line": 824,
          "text": "clearInterval(progressTimerRef.current)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 790,
          "text": "timerRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 916,
          "text": "document.addEventListener('mousedown', onClickOutside)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 934,
          "text": "window.addEventListener('keydown', onKeyDown)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 917,
          "text": "return () => document.removeEventListener('mousedown', onClickOutside)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 935,
          "text": "return () => window.removeEventListener('keydown', onKeyDown)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\InviteFriendProvider.jsx",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "addEventListener": 4,
        "removeEventListener": 4,
        "wheel": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 207,
          "text": "const id = window.setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 225,
          "text": "window.clearInterval(id)",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "addEventListener",
          "line": 155,
          "text": "window.addEventListener('auth:ok', handleAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 156,
          "text": "window.addEventListener('auth:success', handleAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 176,
          "text": "window.addEventListener('invite:open', handler)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 195,
          "text": "events.forEach((ev) => window.addEventListener(ev, onActivity))",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 159,
          "text": "window.removeEventListener('auth:ok', handleAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 160,
          "text": "window.removeEventListener('auth:success', handleAuth)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 178,
          "text": "window.removeEventListener('invite:open', handler)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 197,
          "text": "events.forEach((ev) => window.removeEventListener(ev, onActivity))",
          "why": "Проверяем парность с add"
        },
        {
          "key": "wheel",
          "line": 193,
          "text": "const events = ['pointerdown', 'keydown', 'wheel', 'touchstart', 'focus', 'scroll', 'visibilitychange']",
          "why": "Wheel обработчики могут грузить"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\NotRobot.jsx",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "setTimeout": 5,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<img": 2,
        "decoding=async": 3
      },
      "flags": [],
      "hits": [
        {
          "key": "setInterval",
          "line": 177,
          "text": "rbCountdownIntervalRef.current = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 125,
          "text": "clearInterval(rbCountdownIntervalRef.current);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "setTimeout",
          "line": 185,
          "text": "rbRedirectTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 271,
          "text": "rbIdleTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 319,
          "text": "rbCloseOverlayTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 376,
          "text": "else setTimeout(() => rbPreloadImages(), 300);",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 381,
          "text": "rbFirstShowTimeoutRef.current = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 406,
          "text": "window.addEventListener(evt, activityHandler, { passive: true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 415,
          "text": "window.removeEventListener(evt, activityHandler)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 493,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 521,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "decoding=async",
          "line": 167,
          "text": "img.decoding = \"async\";",
          "why": "Полезно для img"
        },
        {
          "key": "decoding=async",
          "line": 498,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        },
        {
          "key": "decoding=async",
          "line": 526,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\public\\compat.js",
      "counts": {
        "setInterval": 1,
        "clearInterval": 1,
        "addEventListener": 3
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setInterval",
          "line": 41,
          "text": "const t = setInterval(() => {",
          "why": "Может плодиться/не чиститься → утечки/нагрузка"
        },
        {
          "key": "clearInterval",
          "line": 43,
          "text": "if (setTmaFlag() || tries >= maxTries) clearInterval(t);",
          "why": "Проверяем парность с setInterval"
        },
        {
          "key": "addEventListener",
          "line": 53,
          "text": "window.addEventListener('resize', setVhVars);",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 87,
          "text": "document.addEventListener('click', (e) => {",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 116,
          "text": "document.addEventListener('click', (e) => {",
          "why": "Если без remove → утечки и лаги"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\ads\\page.jsx",
      "counts": {
        "querySelectorAll": 1,
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "querySelectorAll",
          "line": 66,
          "text": "const imgs = root.querySelectorAll('img[data-anim=\"1\"]')",
          "why": "Может быть дорого/часто вызываться"
        },
        {
          "key": "addEventListener",
          "line": 107,
          "text": "img.addEventListener('mouseenter', onEnter)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 117,
          "text": "img.removeEventListener('mouseenter', onEnter)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\ads.js",
      "counts": {
        "setTimeout": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 126,
          "text": "timer = setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\api\\quotes\\route.js",
      "counts": {
        "setTimeout": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 34,
          "text": "const sleep = (ms) => new Promise(r => setTimeout(r, ms))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 38,
          "text": "const id = setTimeout(() => reject(new Error('timeout')), ms)",
          "why": "Может заспамить ререндер/таймеры"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\page.js",
      "counts": {
        "loading=lazy": 1,
        "decoding=async": 1,
        "onScroll": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "loading=lazy",
          "line": 87,
          "text": "loading=\"lazy\"",
          "why": "Ищем где НЕ lazy"
        },
        {
          "key": "decoding=async",
          "line": 88,
          "text": "decoding=\"async\"",
          "why": "Полезно для img"
        },
        {
          "key": "onScroll",
          "line": 170,
          "text": "onScroll={handleScroll}",
          "why": "Проверь, нет ли setState/измерений внутри"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\forum\\SharePopover.jsx",
      "counts": {
        "setTimeout": 1,
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 33,
          "text": "const id = window.setTimeout(() => {",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 50,
          "text": "document.addEventListener('keydown', onKey, true)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 51,
          "text": "return () => document.removeEventListener('keydown', onKey, true)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\app\\subscribe\\subscribe.client.jsx",
      "counts": {
        "setTimeout": 2,
        "addEventListener": 5,
        "removeEventListener": 3
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "setTimeout",
          "line": 36,
          "text": "setTimeout(()=> resolve(getAcc()), 120000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 225,
          "text": "setTimeout(() => { refreshVip() }, 5000)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 34,
          "text": "window.addEventListener('auth:ok', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 35,
          "text": "window.addEventListener('auth:success', done, { once:true })",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 209,
          "text": "window.addEventListener('focus', onFocus)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 210,
          "text": "document.addEventListener('visibilitychange', onVis)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 211,
          "text": "window.addEventListener('auth:ok', onAuth)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 213,
          "text": "window.removeEventListener('focus', onFocus)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 214,
          "text": "document.removeEventListener('visibilitychange', onVis)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 215,
          "text": "window.removeEventListener('auth:ok', onAuth)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\AuthNavClient.jsx",
      "counts": {
        "setTimeout": 1,
        "addEventListener": 2,
        "removeEventListener": 2,
        "<img": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 319,
          "text": "const delay = (ms) => new Promise(r => setTimeout(r, ms))",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 187,
          "text": "window.addEventListener('auth:ok', onAuthOk)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 200,
          "text": "window.addEventListener('open-auth', handler)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 188,
          "text": "return () => window.removeEventListener('auth:ok', onAuthOk)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 201,
          "text": "return () => window.removeEventListener('open-auth', handler)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 388,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\HeroAvatar.js",
      "counts": {
        "setTimeout": 2,
        "addEventListener": 1,
        "removeEventListener": 1,
        "<img": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "setTimeout",
          "line": 76,
          "text": "setTimeout(spawn, spawnEvery)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "setTimeout",
          "line": 78,
          "text": "const t = setTimeout(spawn, 0)",
          "why": "Может заспамить ререндер/таймеры"
        },
        {
          "key": "addEventListener",
          "line": 93,
          "text": "window.addEventListener('mousemove', onMove)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 94,
          "text": "return () => window.removeEventListener('mousemove', onMove)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "<img",
          "line": 138,
          "text": "{/* ПОСТЕР: всегда обычный <img>, без next/image оптимизации */}",
          "why": "Картинки без lazy часто убивают память"
        },
        {
          "key": "<img",
          "line": 142,
          "text": "<img",
          "why": "Картинки без lazy часто убивают память"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\i18n.js",
      "counts": {
        "loop": 45
      },
      "flags": [],
      "hits": [
        {
          "key": "loop",
          "line": 72,
          "text": "`Quantum L7 AI is a cross-platform ecosystem: the AI core, autonomous L7 agents, on-chain monitoring, normalized market feeds, the forum social network, and the QCoin economy are combined into a single computational fabric. Every artifact — a transaction, a news narrative, a post, a liquidity chart — enters the common data loop and becomes a call to action.`,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 77,
          "text": "`The forum is embedded into the loop: content passes AI scoring (quality, engagement, anti-spam/anti-sybil), and activity is mapped into the QCoin economy. This is not a “social network for likes” but a targeted cognitive bus where knowledge and contribution are converted into tokenized value.`,",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 11593,
          "text": "qa_ai_1210_q: 'What does \"human-in-the-loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12148,
          "text": "qa_meta_1395_q: 'What is the \"user feedback loop\" for definitions?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12361,
          "text": "qa_ai_1466_q: 'What does \"human-in-the-loop moderation of knowledge\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 12697,
          "text": "qa_meta_1578_q: 'What does \"continuous reasoning loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13057,
          "text": "qa_meta_1698_q: 'What does \"education arbitrage loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13159,
          "text": "qa_meta_1732_q: 'What does \"collective cognition loop\" mean?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 13160,
          "text": "qa_meta_1732_a: 'A closed loop in which the community trains AI, and AI trains the community, reinforcing shared understanding.',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16041,
          "text": "qa_ai_1210_q: 'Что означает “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16596,
          "text": "qa_meta_1395_q: 'Что такое “user feedback loop” для определений?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 16809,
          "text": "qa_ai_1466_q: 'Что означает “human-in-the-loop модерация знаний”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 17145,
          "text": "qa_meta_1578_q: 'Что означает “continuous reasoning loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 17504,
          "text": "qa_meta_1698_q: 'Что означает “education arbitrage loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 17606,
          "text": "qa_meta_1732_q: 'Что означает “collective cognition loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 20472,
          "text": "qa_ai_1210_q: 'Що означає “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21027,
          "text": "qa_meta_1395_q: 'Що таке “user feedback loop” для определений?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21240,
          "text": "qa_ai_1466_q: 'Що означає “human-in-the-loop модерація знань”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21576,
          "text": "qa_meta_1578_q: 'Що означає “continuous reasoning loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 21936,
          "text": "qa_meta_1698_q: 'Що означає “education arbitrage loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 22038,
          "text": "qa_meta_1732_q: 'Що означає “collective cognition loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 24904,
          "text": "qa_ai_1210_q: '¿Qué significa “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 25459,
          "text": "qa_meta_1395_q: '¿Qué es el “user feedback loop” para definiciones?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 25672,
          "text": "qa_ai_1466_q: '¿Qué significa “human-in-the-loop moderación del conocimiento”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26008,
          "text": "qa_meta_1578_q: '¿Qué significa “continuous reasoning loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26368,
          "text": "qa_meta_1698_q: '¿Qué significa “education arbitrage loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 26470,
          "text": "qa_meta_1732_q: '¿Qué significa “collective cognition loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 29340,
          "text": "qa_ai_1210_q: '“human-in-the-loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 29895,
          "text": "qa_meta_1395_q: '什么是 “user feedback loop” 对定义？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30108,
          "text": "qa_ai_1466_q: '“human-in-the-loop 知识审核” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30444,
          "text": "qa_meta_1578_q: '“continuous reasoning loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30804,
          "text": "qa_meta_1698_q: '“education arbitrage loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 30906,
          "text": "qa_meta_1732_q: '“collective cognition loop” 是什么意思？',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 33776,
          "text": "qa_ai_1210_q: 'ماذا يعني “human-in-the-loop”?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 34331,
          "text": "qa_meta_1395_q: 'ما هو “user feedback loop” للتعريفات؟',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 34544,
          "text": "qa_ai_1466_q: 'ماذا يعني \"human-in-the-loop модерация знаний\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 34880,
          "text": "qa_meta_1578_q: 'ماذا يعني \"continuous reasoning loop\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 35240,
          "text": "qa_meta_1698_q: 'ماذا يعني \"education arbitrage loop\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 35342,
          "text": "qa_meta_1732_q: 'ماذا يعني \"collective cognition loop\"?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 38212,
          "text": "qa_ai_1210_q: '\"human-in-the-loop\" ne anlama gelir?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 38767,
          "text": "qa_meta_1395_q: '\"user feedback loop\" (tanımlar için) nedir?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 38980,
          "text": "qa_ai_1466_q: '“human-in-the-loop bilgi moderasyonu” ne anlama geliyor?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39316,
          "text": "qa_meta_1578_q: '“continuous reasoning loop” ne anlama geliyor?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39676,
          "text": "qa_meta_1698_q: '“education arbitrage loop” ne anlama gelir?',",
          "why": "Loop особенно опасен на множестве карточек"
        },
        {
          "key": "loop",
          "line": 39778,
          "text": "qa_meta_1732_q: '“collective cognition loop” ne anlama gelir?',",
          "why": "Loop особенно опасен на множестве карточек"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\InviteFriendPopup.jsx",
      "counts": {
        "addEventListener": 2,
        "removeEventListener": 2
      },
      "flags": [],
      "hits": [
        {
          "key": "addEventListener",
          "line": 35,
          "text": "window.addEventListener('resize', handleResize)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "addEventListener",
          "line": 61,
          "text": "window.addEventListener('keydown', handleKey)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 36,
          "text": "return () => window.removeEventListener('resize', handleResize)",
          "why": "Проверяем парность с add"
        },
        {
          "key": "removeEventListener",
          "line": 62,
          "text": "return () => window.removeEventListener('keydown', handleKey)",
          "why": "Проверяем парность с add"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\TopBar.js",
      "counts": {
        "addEventListener": 1
      },
      "flags": [
        "⚠ addEventListener > removeEventListener (возможная утечка)"
      ],
      "hits": [
        {
          "key": "addEventListener",
          "line": 34,
          "text": "window.addEventListener('auth:logout', onLogout)",
          "why": "Если без remove → утечки и лаги"
        }
      ]
    },
    {
      "file": "C:\\Users\\BETEP\\OneDrive\\Рабочий стол\\quantuml7ai_fullstarter\\components\\UnlimitModal.client.jsx",
      "counts": {
        "addEventListener": 1,
        "removeEventListener": 1
      },
      "flags": [],
      "hits": [
        {
          "key": "addEventListener",
          "line": 10,
          "text": "window.addEventListener('keydown', onKey)",
          "why": "Если без remove → утечки и лаги"
        },
        {
          "key": "removeEventListener",
          "line": 11,
          "text": "return () => window.removeEventListener('keydown', onKey)",
          "why": "Проверяем парность с add"
        }
      ]
    }
  ]
}